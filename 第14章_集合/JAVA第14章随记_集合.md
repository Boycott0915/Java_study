# 	JAVAç¬¬14ç« éšè®° é›†åˆ

## é›†åˆ

![image-20251002164132832](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251002164132832.png)

## é›†åˆçš„æ¡†æ¶ä½“ç³»â­â­â­â­â­(èƒŒ)

![image-20251002170016968](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251002170016968.png)

![image-20251002170026058](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251002170026058.png)

```java
//1. é›†åˆä¸»è¦æ˜¯ä¸¤ç»„(å•åˆ—é›†åˆ , åŒåˆ—é›†åˆ)
//2. Collection æ¥å£æœ‰ä¸¤ä¸ªé‡è¦çš„å­æ¥å£ List Set , ä»–ä»¬çš„å®ç°å­ç±»éƒ½æ˜¯å•åˆ—é›†åˆ
//3. Map æ¥å£çš„å®ç°å­ç±» æ˜¯åŒåˆ—é›†åˆï¼Œå­˜æ”¾çš„ K-V é”®å€¼å¯¹
```

## Collectionæ¥å£å’Œå¸¸ç”¨æ–¹æ³•

![image-20251002171135717](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251002171135717.png)

![image-20251002171159669](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251002171159669.png)

### iteratorè¿­ä»£å™¨

#### 1. Iteratorçš„åŸºæœ¬æ¦‚å¿µ

Iteratoræ˜¯Javaé›†åˆæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œå®ƒä½äº`java.util`åŒ…ä¸­ã€‚Iteratorä¸æ˜¯é›†åˆæœ¬èº«ï¼Œè€Œæ˜¯ä¸€ç§ç”¨äºéå†é›†åˆçš„æœºåˆ¶ã€‚ä»»ä½•å®ç°äº†`Iterable`æ¥å£çš„é›†åˆï¼ˆå¦‚ArrayListã€LinkedListã€HashSetç­‰ï¼‰éƒ½å¯ä»¥é€šè¿‡è°ƒç”¨`iterator()`æ–¹æ³•è·å–ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚

Iteratorçš„æ ¸å¿ƒä½œç”¨æ˜¯æä¾›ä¸€ç§ç»Ÿä¸€çš„éå†é›†åˆå…ƒç´ çš„æ–¹å¼ï¼Œæ— è®ºåº•å±‚é›†åˆçš„å…·ä½“å®ç°å¦‚ä½•ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•æ¥è®¿é—®å…¶ä¸­çš„å…ƒç´ ã€‚

#### 2. Iteratorçš„æ ¸å¿ƒæ–¹æ³•

Iteratoræ¥å£å®šä¹‰äº†ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼ŒæŒæ¡äº†å®ƒä»¬å°±æŒæ¡äº†Iteratorçš„ä½¿ç”¨ï¼š

| æ–¹æ³•å      | è¿”å›å€¼      | åŠŸèƒ½æè¿°                                   |
| :---------- | :---------- | :----------------------------------------- |
| `hasNext()` | `boolean`   | æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ›´å¤šå…ƒç´ å¯ä¾›éå†               |
| `next()`    | `E`ï¼ˆæ³›å‹ï¼‰ | è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†æŒ‡é’ˆå‘åç§»åŠ¨           |
| `remove()`  | `void`      | åˆ é™¤ä¸Šæ¬¡è°ƒç”¨`next()`è¿”å›çš„å…ƒç´ ï¼ˆå¯é€‰æ“ä½œï¼‰ |

##### 2.1 hasNext()å’Œnext()æ–¹æ³•

`hasNext()`æ–¹æ³•ç”¨äºæ£€æŸ¥é›†åˆä¸­æ˜¯å¦è¿˜æœ‰æœªéå†çš„å…ƒç´ ï¼Œè€Œ`next()`æ–¹æ³•åˆ™å®é™…è·å–ä¸‹ä¸€ä¸ªå…ƒç´ å¹¶å°†è¿­ä»£å™¨çš„æŒ‡é’ˆå‘åç§»åŠ¨ã€‚

```java
import java.util.ArrayList;
import java.util.Iterator;

public class IteratorExample {
    public static void main(String[] args) {
        // åˆ›å»ºä¸€ä¸ªArrayListé›†åˆ
        ArrayList<String> fruits = new ArrayList<>();
        fruits.add("Apple");
        fruits.add("Banana");
        fruits.add("Cherry");
        
        // è·å–è¿­ä»£å™¨
        Iterator<String> iterator = fruits.iterator();
        
        // ä½¿ç”¨whileå¾ªç¯éå†é›†åˆ
        while(iterator.hasNext()) {
            String fruit = iterator.next();
            System.out.println(fruit);
        }
    }
}
```

##### 2.2 remove()æ–¹æ³•

`remove()`æ–¹æ³•ç”¨äºåˆ é™¤è¿­ä»£å™¨å½“å‰æŒ‡å‘çš„å…ƒç´ ã€‚**é‡è¦æç¤º**ï¼šå¿…é¡»å…ˆè°ƒç”¨`next()`æ–¹æ³•å®šä½åˆ°å…ƒç´ åï¼Œæ‰èƒ½è°ƒç”¨`remove()`æ–¹æ³•ã€‚

```java
import java.util.ArrayList;
import java.util.Iterator;

public class RemoveExample {
    public static void main(String[] args) {
        ArrayList<Integer> numbers = new ArrayList<>();
        numbers.add(12);
        numbers.add(8);
        numbers.add(2);
        numbers.add(23);
        
        Iterator<Integer> it = numbers.iterator();
        while(it.hasNext()) {
            Integer num = it.next();
            if(num < 10) {
                it.remove(); // åˆ é™¤å°äº10çš„å…ƒç´ 
            }
        }
        
        System.out.println(numbers); // è¾“å‡º: [12, 23]
    }
}
```

#### 3. Iteratorçš„å·¥ä½œåŸç†

ç†è§£Iteratorçš„å·¥ä½œåŸç†æœ‰åŠ©äºé¿å…å¸¸è§çš„é”™è¯¯ã€‚ä½ å¯ä»¥æŠŠè¿­ä»£å™¨æƒ³è±¡æˆä¸€ä¸ªæŒ‡å‘é›†åˆå…ƒç´ çš„"æŒ‡é’ˆ"ï¼š

1. å½“é€šè¿‡`é›†åˆ.iterator()`è·å–è¿­ä»£å™¨æ—¶ï¼ŒæŒ‡é’ˆä½äºç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰
2. ç¬¬ä¸€æ¬¡è°ƒç”¨`next()`ï¼ŒæŒ‡é’ˆç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›è¯¥å…ƒç´ 
3. åç»­è°ƒç”¨`next()`ï¼ŒæŒ‡é’ˆç»§ç»­å‘åç§»åŠ¨
4. å½“`hasNext()`è¿”å›`false`æ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰å…ƒç´ å·²éå†å®Œæ¯•

Iteratorï¼ˆè¿­ä»£å™¨ï¼‰æ˜¯Javaä¸­ç”¨äºéå†é›†åˆï¼ˆå¦‚ArrayListã€HashSetç­‰ï¼‰çš„é‡è¦å·¥å…·ã€‚å®ƒæä¾›äº†ä¸€ç§æ ‡å‡†çš„æ–¹æ³•æ¥é€ä¸ªè®¿é—®é›†åˆä¸­çš„å…ƒç´ ï¼Œè€Œæ— éœ€å…³å¿ƒé›†åˆçš„å†…éƒ¨ç»“æ„ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡ŠIteratorçš„ç”¨æ³•ã€åŸç†å’Œæ³¨æ„äº‹é¡¹ã€‚

ä¸‹é¢çš„è¡¨æ ¼å±•ç¤ºäº†è¿­ä»£å™¨éå†é›†åˆ`["A", "B", "C"]`çš„è¿‡ç¨‹ï¼š

| æ“ä½œ        | è¿”å›å€¼  | æŒ‡é’ˆä½ç½® |
| :---------- | :------ | :------- |
| åˆå§‹çŠ¶æ€    | -       | â†‘A, B, C |
| `hasNext()` | `true`  | â†‘A, B, C |
| `next()`    | "A"     | A, â†‘B, C |
| `next()`    | "B"     | A, B, â†‘C |
| `next()`    | "C"     | A, B, Câ†‘ |
| `hasNext()` | `false` | A, B, Câ†‘ |

#### 4. å¢å¼ºforå¾ªç¯ä¸Iteratorçš„å…³ç³»

Javaçš„å¢å¼ºforå¾ªç¯ï¼Œå¢å¼º for å¾ªç¯æ˜¯ä¸€ç§â€œè¯­æ³•ç³–â€ï¼Œæ„æ€æ˜¯å®ƒåªæ˜¯ç°æœ‰æŠ€æœ¯çš„ç®€ä¾¿å†™æ³•ï¼Œç¼–è¯‘åä¼šè¢«è½¬æ¢æˆç­‰ä»·çš„åº•å±‚å®ç°,==åº•å±‚ä»ç„¶ä½¿ç”¨Iteratorå®ç°ã€‚==

```java
// å¢å¼ºforå¾ªç¯
/*
for (å…ƒç´ ç±»å‹ å±€éƒ¨å˜é‡å : è¦éå†çš„æ•°ç»„æˆ–é›†åˆ) {
    // å¾ªç¯ä½“ï¼Œå¯ä»¥ä½¿ç”¨å±€éƒ¨å˜é‡
}
*/
for (String fruit : fruits) {
    System.out.println(fruit);
}

// ç­‰ä»·äºä»¥ä¸‹Iteratorå†™æ³•
Iterator<String> iterator = fruits.iterator();
while(iterator.hasNext()) {
    String fruit = iterator.next();
    System.out.println(fruit);
}
```

è™½ç„¶å¢å¼ºforå¾ªç¯æ›´ç®€æ´ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé™åˆ¶ï¼š**åœ¨å¢å¼ºforå¾ªç¯ä¸­ä¸èƒ½ç›´æ¥ä¿®æ”¹é›†åˆç»“æ„ï¼ˆå¦‚åˆ é™¤å…ƒç´ ï¼‰**ï¼Œå¦åˆ™ä¼šæŠ›å‡º`ConcurrentModificationException`å¼‚å¸¸ã€‚éœ€è¦åˆ é™¤å…ƒç´ æ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ˜¾å¼çš„Iteratorã€‚

#### 5.æµ‹è¯•é¢˜

![image-20251003135659448](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251003135659448.png)

```java
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

// å®šä¹‰Dogç±»
class Dog {
    private String name;
    private int age;

    // æ„é€ æ–¹æ³•ï¼Œç”¨äºåˆå§‹åŒ–nameå’Œage
    public Dog(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // é‡å†™toStringæ–¹æ³•ï¼Œè‡ªå®šä¹‰è¾“å‡ºæ ¼å¼
    @Override
    public String toString() {
        return "Dog{name='" + name + "', age=" + age + "}";
    }
}

// ä¸»ç±»
public class CollectionExercise {
    public static void main(String[] args) {
        // 1. åˆ›å»ºArrayListå¹¶èµ‹ç»™Listæ¥å£å¼•ç”¨ï¼ˆå¤šæ€ï¼šListæ˜¯æ¥å£ï¼ŒArrayListæ˜¯å®ç°ç±»ï¼‰
        List dogList = new ArrayList();

        // åˆ›å»º3ä¸ªDogå¯¹è±¡å¹¶æ·»åŠ åˆ°ArrayListä¸­
        dogList.add(new Dog("Buddy", 3));
        dogList.add(new Dog("Max", 5));
        dogList.add(new Dog("Charlie", 2));

        // 2. ä½¿ç”¨è¿­ä»£å™¨éå† å¿«æ·é”®itit
        System.out.println("=== ä½¿ç”¨è¿­ä»£å™¨éå† ===");
        Iterator<Dog> iterator = dogList.iterator(); // è·å–è¿­ä»£å™¨å¯¹è±¡
        while (iterator.hasNext()) { // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ 
            Dog dog = iterator.next(); // è·å–ä¸‹ä¸€ä¸ªå…ƒç´ å¹¶ç§»åŠ¨æŒ‡é’ˆ
            System.out.println(dog); // è‡ªåŠ¨è°ƒç”¨dogçš„toStringæ–¹æ³•
        }

        // 3. ä½¿ç”¨å¢å¼ºforå¾ªç¯éå† å¿«æ·é”®I
        System.out.println("\n=== ä½¿ç”¨å¢å¼ºforå¾ªç¯éå† ===");
        for (Dog dog : dogList) { // è¯­æ³•ï¼šfor (å…ƒç´ ç±»å‹ å˜é‡ : é›†åˆ)
            System.out.println(dog);
        }
    }
}
```

------

## Listæ¥å£å’Œå¸¸ç”¨æ–¹æ³•

![image-20251003141839445](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251003141839445-1759472320105-1.png)

List æ¥å£æ˜¯ Java é›†åˆæ¡†æ¶ä¸­éå¸¸æ ¸å¿ƒçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ª==**æœ‰åºã€å¯é‡å¤**==çš„åºåˆ—ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº† List ä¸»è¦å®ç°ç±»çš„ç‰¹ç‚¹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼š

| å®ç°ç±»                   | åº•å±‚æ•°æ®ç»“æ„         | çº¿ç¨‹å®‰å…¨           | éšæœºè®¿é—®æ•ˆç‡        | æ’å…¥/åˆ é™¤æ•ˆç‡                 | å…¸å‹é€‚ç”¨åœºæ™¯                 |
| :----------------------- | :------------------- | :----------------- | :------------------ | :---------------------------- | :--------------------------- |
| **ArrayList**            | åŠ¨æ€æ•°ç»„             | **å¦**             | **O(1) - å¿«**       | O(n) - æ…¢ï¼ˆéœ€ç§»åŠ¨å…ƒç´ ï¼‰       | æŸ¥è¯¢é¢‘ç¹ï¼Œå¢åˆ æ“ä½œå°‘         |
| **LinkedList**           | åŒå‘é“¾è¡¨             | **å¦**             | O(n) - æ…¢ï¼ˆéœ€éå†ï¼‰ | **O(1) - å¿«**ï¼ˆåœ¨å·²çŸ¥èŠ‚ç‚¹å¤„ï¼‰ | é¢‘ç¹åœ¨åˆ—è¡¨ä¸­é—´è¿›è¡Œæ’å…¥å’Œåˆ é™¤ |
| **Vector**               | åŠ¨æ€æ•°ç»„             | **æ˜¯**ï¼ˆæ–¹æ³•åŒæ­¥ï¼‰ | O(1) - å¿«           | O(n) - æ…¢                     | é—ç•™ç³»ç»Ÿï¼Œçº¿ç¨‹å®‰å…¨éœ€æ±‚       |
| **CopyOnWriteArrayList** | åŠ¨æ€æ•°ç»„ï¼ˆå†™æ—¶å¤åˆ¶ï¼‰ | **æ˜¯**ï¼ˆå†™æ—¶å¤åˆ¶ï¼‰ | O(1) - å¿«ï¼ˆè¯»ï¼‰     | O(n) - æ…¢ï¼ˆå†™ï¼‰               | è¯»å¤šå†™æå°‘çš„é«˜å¹¶å‘åœºæ™¯       |

ç†è§£ List æ¥å£ï¼Œé¦–å…ˆè¦æŒæ¡å®ƒçš„ä¸‰ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼š

- **æœ‰åºæ€§**ï¼šå…ƒç´ æŒ‰ç…§æ’å…¥çš„é¡ºåºå­˜å‚¨ï¼Œç¬¬ä¸€ä¸ªæ·»åŠ çš„å…ƒç´ ç´¢å¼•ä¸º0ï¼Œç¬¬äºŒä¸ªä¸º1ï¼Œä»¥æ­¤ç±»æ¨ã€‚
- **å¯é‡å¤æ€§**ï¼šå…è®¸å­˜å‚¨ç›¸åŒçš„å…ƒç´ ã€‚
- **ç´¢å¼•æ”¯æŒ**ï¼šå¯ä»¥é€šè¿‡ç±»ä¼¼æ•°ç»„çš„ä¸‹æ ‡ï¼ˆä»0å¼€å§‹ï¼‰æ¥ç²¾ç¡®è®¿é—®å’Œæ“ä½œå…ƒç´ ã€‚

### List å¸¸ç”¨çš„æ“ä½œæ–¹æ³•ï¼š

**1. å¢åŠ å…ƒç´ **

- `boolean add(E e)`: å°†å…ƒç´ è¿½åŠ åˆ°åˆ—è¡¨æœ«å°¾ã€‚
- `void add(int index, E element)`: åœ¨æŒ‡å®šç´¢å¼•ä½ç½®æ’å…¥å…ƒç´ ï¼Œè¯¥ä½ç½®åŠåç»­çš„å…ƒç´ ä¼šè‡ªåŠ¨åç§»ã€‚

**2. åˆ é™¤å…ƒç´ **

- `E remove(int index)`: ç§»é™¤æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¢«ç§»é™¤çš„å…ƒç´ ã€‚
- `boolean remove(Object o)`: ç§»é™¤åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œè¿”å›æ˜¯å¦æˆåŠŸç§»é™¤ã€‚

**3. ä¿®æ”¹å…ƒç´ **

- `E set(int index, E element)`: ç”¨æŒ‡å®šå…ƒç´ æ›¿æ¢åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¢«æ›¿æ¢çš„æ—§å…ƒç´ ã€‚

**4. æŸ¥è¯¢å…ƒç´ **

- `E get(int index)`: è¿”å›åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚
- `int indexOf(Object o)`: è¿”å›æŒ‡å®šå…ƒç´ åœ¨åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›-1ã€‚
- `int lastIndexOf(Object o)`: è¿”å›æŒ‡å®šå…ƒç´ åœ¨åˆ—è¡¨ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚
- `int size()`: è¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚
- `boolean contains(Object o)`: åˆ¤æ–­åˆ—è¡¨æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ã€‚
- `boolean isEmpty()`: åˆ¤æ–­åˆ—è¡¨æ˜¯å¦ä¸ºç©ºã€‚

**5. å…¶ä»–æ“ä½œ**

- `void clear()`: æ¸…ç©ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚
- `List<E> subList(int fromIndex, int toIndex)`: è¿”å›ä» `fromIndex`ï¼ˆåŒ…å«ï¼‰åˆ° `toIndex`ï¼ˆä¸åŒ…å«ï¼‰çš„å­åˆ—è¡¨è§†å›¾ã€‚

```java
import java.util.ArrayList;
import java.util.List;

public class ListBasicExample {
    public static void main(String[] args) {
        // 1. åˆ›å»ºä¸€ä¸ªArrayListï¼ˆä½¿ç”¨Listæ¥å£å¼•ç”¨ï¼Œè¿™æ˜¯è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼‰
        List<String> cityList = new ArrayList<>();

        // 2. æ·»åŠ å…ƒç´ 
        cityList.add("Beijing"); // ç´¢å¼•0
        cityList.add("Shanghai"); // ç´¢å¼•1
        cityList.add("Guangzhou"); // ç´¢å¼•2
        cityList.add(1, "Shenzhen"); // åœ¨ç´¢å¼•1å¤„æ’å…¥ï¼ŒåŸç´¢å¼•1åŠä¹‹åçš„å…ƒç´ åç§»

        System.out.println("åˆå§‹åˆ—è¡¨: " + cityList); // è¾“å‡º: [Beijing, Shenzhen, Shanghai, Guangzhou]

        // 3. æŸ¥è¯¢å…ƒç´ 
        String city = cityList.get(2);
        System.out.println("ç´¢å¼•2çš„åŸå¸‚æ˜¯: " + city); // è¾“å‡º: Shanghai
        System.out.println("æ·±åœ³çš„ç´¢å¼•ä½ç½®: " + cityList.indexOf("Shenzhen")); // è¾“å‡º: 1
        System.out.println("åˆ—è¡¨å¤§å°: " + cityList.size()); // è¾“å‡º: 4

        // 4. ä¿®æ”¹å…ƒç´ 
        String oldCity = cityList.set(3, "Hangzhou");
        System.out.println("å°†" + oldCity + "æ›¿æ¢ä¸ºHangzhouå: " + cityList); // è¾“å‡º: [Beijing, Shenzhen, Shanghai, Hangzhou]

        // 5. åˆ é™¤å…ƒç´ 
        cityList.remove("Shenzhen"); // æŒ‰å…ƒç´ åˆ é™¤
        cityList.remove(0); // æŒ‰ç´¢å¼•åˆ é™¤
        System.out.println("åˆ é™¤éƒ¨åˆ†å…ƒç´ å: " + cityList); // è¾“å‡º: [Shanghai, Hangzhou]

        // 6. å­åˆ—è¡¨
        List<String> subList = cityList.subList(0, 1);
        System.out.println("å­åˆ—è¡¨: " + subList); // è¾“å‡º: [Shanghai]
    }
}
```

###  éå†Listçš„ä¸‰ç§æ–¹å¼

#### **1. æ™®é€š for å¾ªç¯ï¼ˆä½¿ç”¨ç´¢å¼•ï¼‰**

å½“éœ€è¦çŸ¥é“å…ƒç´ çš„ç´¢å¼•æ—¶ä½¿ç”¨ã€‚

```java
for (int i = 0; i < list.size(); i++) {
    String item = list.get(i);
    System.out.println("ç´¢å¼• " + i + ": " + item);
}
```

#### **2. å¢å¼º for å¾ªç¯ï¼ˆfor-eachï¼‰**

è¯­æ³•ç®€æ´ï¼Œé€‚ç”¨äºåªéœ€éå†å…ƒç´ è€Œæ— éœ€ç´¢å¼•çš„åœºæ™¯ã€‚

```java
for (String item : list) {
    System.out.println(item);
}
```

#### **3. è¿­ä»£å™¨ï¼ˆIteratorï¼‰**

æä¾›äº†å®‰å…¨çš„éå†æ–¹å¼ï¼Œå¯ä»¥åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨è¿­ä»£å™¨çš„ `remove()`æ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œè€Œä¸ä¼šå¼•å‘å¹¶å‘ä¿®æ”¹å¼‚å¸¸ã€‚

```java
java.util.Iterator<String> iterator = list.iterator();
while (iterator.hasNext()) {
    String item = iterator.next();
    System.out.println(item);
    // å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨è¿™é‡Œå®‰å…¨åœ°ä½¿ç”¨ iterator.remove(); åˆ é™¤å½“å‰å…ƒç´ 
}
```

------

## æ”¹æŸ¥å¤šArrayList (Collection-Listå­ç±»)

### å®šä¹‰

åº•å±‚çš„æ•°æ®ç»“æ„å°±æ˜¯**æ•°ç»„**ï¼Œæ•°ç»„å…ƒç´ ç±»å‹ä¸º Object ç±»å‹ï¼Œå³å¯ä»¥å­˜æ”¾æ‰€æœ‰ç±»å‹æ•°æ®ã€‚å¯¹ ArrayList ç±»çš„å®ä¾‹çš„æ‰€æœ‰æ“ä½œåº•å±‚éƒ½æ˜¯åŸºäºæ•°ç»„çš„ã€‚

### æ³¨æ„äº‹é¡¹

1.**çº¿ç¨‹ä¸å®‰å…¨**

ArrayList æ˜¯**éåŒæ­¥çš„**ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ï¼ˆæ·»åŠ ã€åˆ é™¤ï¼‰å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´æˆ–å¼‚å¸¸ã€‚

2.**Fail-Fast æœºåˆ¶**

å½“ä½¿ç”¨è¿­ä»£å™¨éå† ArrayList æ—¶ï¼Œå¦‚æœ**ç›´æ¥é€šè¿‡ ArrayList çš„æ–¹æ³•ï¼ˆéè¿­ä»£å™¨è‡ªèº«çš„ `remove`æ–¹æ³•ï¼‰ä¿®æ”¹äº†é›†åˆçš„ç»“æ„**ï¼Œè¿­ä»£å™¨ä¼šç«‹å³æŠ›å‡º `ConcurrentModificationException`å¼‚å¸¸ï¼Œè¿™å°±æ˜¯ fail-fastã€‚è¿™æ˜¯ä¸ºäº†å°½æ—©å‘ç°å¹¶å‘ä¿®æ”¹é—®é¢˜ï¼Œé¿å…æ›´éšè”½çš„é”™è¯¯ã€‚

```java
// é”™è¯¯ç¤ºä¾‹ï¼šä¼šæŠ›å‡ºConcurrentModificationException
Iterator<String> it = list.iterator();
while (it.hasNext()) {
    String s = it.next();
    if ("A".equals(s)) {
        list.remove(s); // é”™è¯¯ï¼ç›´æ¥è°ƒç”¨é›†åˆçš„removeæ–¹æ³•
    }
}

// æ­£ç¡®åšæ³•ï¼šä½¿ç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•
Iterator<String> it = list.iterator();
while (it.hasNext()) {
    String s = it.next();
    if ("A".equals(s)) {
        it.remove(); // æ­£ç¡®ï¼ä½¿ç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•
    }
}
```

ArrayList æ˜¯ List æ¥å£çš„å¤§å°å¯å˜æ•°ç»„çš„å®ç°ï¼›
ArrayList å®ç°äº†æ‰€æœ‰å¯é€‰åˆ—è¡¨æ“ä½œï¼Œå¹¶å…è®¸ null å…ƒç´ ï¼›
ArrayList ä¸æ–­æ·»åŠ å…ƒç´ ï¼Œå®¹é‡ä¹Ÿä¼šè‡ªåŠ¨å¢é•¿ï¼›

### æ‰©å®¹æœºåˆ¶

| **é»˜è®¤åˆå§‹å®¹é‡** | 10                                                           |
| ---------------- | ------------------------------------------------------------ |
| **æ‰©å®¹æœºåˆ¶**     | é€šå¸¸å¢åŠ ä¸ºåŸå®¹é‡çš„ 1.5 å€ï¼ˆ`int newCapacity = oldCapacity + (oldCapacity >> 1)`ï¼‰ |

```java
// 1. æ— å‚æ„é€ ï¼šåˆ›å»ºä¸€ä¸ªåˆå§‹å®¹é‡ä¸º10çš„ç©ºåˆ—è¡¨ï¼ˆå®é™…é¦–æ¬¡æ·»åŠ å…ƒç´ æ—¶æ‰åˆ†é…å®¹é‡ä¸º10çš„æ•°ç»„ï¼Œåˆšå¼€å§‹å®¹é‡ä¸º0ï¼Œ10æ»¡äº†å†æ‰©å®¹åŸæœ¬çš„1.5å€ï¼‰
ArrayList<String> list1 = new ArrayList<>(); 

// 2. æŒ‡å®šåˆå§‹å®¹é‡ï¼šå¦‚æœé¢„å…ˆçŸ¥é“å¤§è‡´å®¹é‡ï¼Œå¯é¿å…åˆæœŸé¢‘ç¹æ‰©å®¹ï¼Œæå‡æ€§èƒ½ï¼Œä¸‹æ¬¡æ‰©å®¹ç›´æ¥æ‰©å®¹1.5å€
ArrayList<Integer> list2 = new ArrayList<>(100); 

// 3. é€šè¿‡é›†åˆæ„é€ ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å«æŒ‡å®šé›†åˆæ‰€æœ‰å…ƒç´ çš„æ–°ArrayList
List<String> existingList = Arrays.asList("A", "B", "C");
ArrayList<String> list3 = new ArrayList<>(existingList);
```

### åº•å±‚ç»“æ„å’Œæºç åˆ†æ

![image-20251003152214000](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251003152214000.png)

![image-20251003152219547](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251003152219547.png)

 

------

## Vectorç±»

| å®ç°ç±»     | åº•å±‚æ•°æ®ç»“æ„ | çº¿ç¨‹å®‰å…¨(synchronized) | éšæœºè®¿é—®æ•ˆç‡ | æ’å…¥/åˆ é™¤æ•ˆç‡ | å…¸å‹é€‚ç”¨åœºæ™¯           |
| :--------- | :----------- | :--------------------- | :----------- | :------------ | :--------------------- |
| **Vector** | åŠ¨æ€æ•°ç»„     | **æ˜¯**ï¼ˆæ–¹æ³•åŒæ­¥ï¼‰     | O(1) - å¿«    | O(n) - æ…¢     | é—ç•™ç³»ç»Ÿï¼Œçº¿ç¨‹å®‰å…¨éœ€æ±‚ |

### Vectorå’ŒArrayListçš„æ¯”è¾ƒ

![image-20251003155614368](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251003155614368.png)

### Vectoræºç è§£è¯»

```java
//è€éŸ©è§£è¯»æºç  

//1. new Vector() åº•å±‚

 /* public Vector() 

{ this(10); } 

è¡¥å……ï¼šå¦‚æœæ˜¯ Vector vector = new Vector(8);

 èµ°çš„æ–¹æ³•: public Vector(int initialCapacity) 

{ this(initialCapacity, 0); } 

//2. vector.add(i) 

2.1 //ä¸‹é¢è¿™ä¸ªæ–¹æ³•å°±æ·»åŠ æ•°æ®åˆ° vector é›†åˆ 

public synchronized boolean add(E e) { 

	modCount++; 

	ensureCapacityHelper(elementCount + 1);

 	elementData[elementCount++] = e; 

	return true; } 

2.2 //ç¡®å®šæ˜¯å¦éœ€è¦æ‰©å®¹ æ¡ä»¶ ï¼šminCapacity - elementData.length>0

 private void ensureCapacityHelper(int minCapacity) { 

// overflow-conscious code 

if (minCapacity - elementData.length > 0)

	grow(minCapacity); } 

2.3 //å¦‚æœ éœ€è¦çš„æ•°ç»„å¤§å° ä¸å¤Ÿç”¨ï¼Œå°±æ‰©å®¹ , æ‰©å®¹çš„ç®—æ³• 

//newCapacity = oldCapacity + ((capacityIncrement > 0) ? capacityIncrement : oldCapacity); //å°±æ˜¯æ‰©å®¹ä¸¤å€.

private void grow(int minCapacity) { 

    // overflow-conscious code 

    int oldCapacity = elementData.length; 

    int newCapacity = oldCapacity + ((capacityIncrement > 0) ? capacityIncrement : oldCapacity); 

    if (newCapacity - minCapacity < 0) 

    newCapacity = minCapacity; 

    if (newCapacity - MAX_ARRAY_SIZE > 0) 

    newCapacity = hugeCapacity(minCapacity); 

    elementData = Arrays.copyOf(elementData, newCapacity); }
```

------

## å¢åˆ å¤šLinkedList(Collection-Listå­ç±»)

| ç‰¹æ€§          | è¯´æ˜                                                         |
| :------------ | :----------------------------------------------------------- |
| **åº•å±‚å®ç°**  | åŒå‘é“¾è¡¨ï¼ˆæ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®ã€æŒ‡å‘å‰é©±èŠ‚ç‚¹çš„å¼•ç”¨å’ŒæŒ‡å‘åç»§èŠ‚ç‚¹çš„å¼•ç”¨ï¼‰ |
| **æ•°æ®ç‰¹æ€§**  | æœ‰åºã€å¯é‡å¤ã€å…è®¸åŒ…å« `null`å…ƒç´                             |
| **éšæœºè®¿é—®**  | **è¾ƒæ…¢**ï¼ˆO(n)ï¼‰ï¼Œéœ€è¦ä»å¤´æˆ–å°¾å¼€å§‹éå†é“¾è¡¨                   |
| **æ’å…¥/åˆ é™¤** | **é«˜æ•ˆ**ï¼ˆåœ¨å·²çŸ¥èŠ‚ç‚¹ä½ç½®æ—¶å¤æ‚åº¦ä¸º O(1)ï¼Œåªéœ€è°ƒæ•´æŒ‡é’ˆï¼‰      |

é“¾è¡¨ä¸­çš„æ¯ä¸ªåŸºæœ¬å•ä½ç§°ä¸º**èŠ‚ç‚¹ï¼ˆNodeï¼‰**ã€‚åœ¨ LinkedList ä¸­ï¼ŒèŠ‚ç‚¹æ˜¯ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š

```java
private static class Node<E> {
    E item;        // å½“å‰èŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®
    Node<E> next;  // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰
    Node<E> prev;  // æŒ‡å‘ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰
    // æ„é€ æ–¹æ³•...
}
```

LinkedList æœ¬èº«åˆ™ç»´æŠ¤äº†ä¸¤ä¸ªé‡è¦çš„æˆå‘˜å˜é‡ï¼Œåˆ†åˆ«æŒ‡å‘é“¾è¡¨çš„é¦–å°¾ï¼š

- `transient Node<E> first;`ï¼šæŒ‡å‘é“¾è¡¨çš„**ç¬¬ä¸€ä¸ªèŠ‚ç‚¹**ã€‚
- `transient Node<E> last;`ï¼šæŒ‡å‘é“¾è¡¨çš„**æœ€åä¸€ä¸ªèŠ‚ç‚¹**ã€‚
- `transient int size;`ï¼šè®°å½•é“¾è¡¨ä¸­èŠ‚ç‚¹çš„**æ•°é‡**ã€‚

#### 1. ä½œä¸º List çš„åŸºæœ¬æ“ä½œ

è¿™äº›æ–¹æ³•æ˜¯ä½ ä» ArrayList é‚£é‡Œå°±å·²ç»ç†Ÿæ‚‰çš„ã€‚

- **æ·»åŠ å…ƒç´ **

  ```java
  LinkedList<String> list = new LinkedList<>();
  list.add("Apple");       // æ·»åŠ åˆ°æœ«å°¾ [Apple]
  list.add(0, "Banana");  // åœ¨ç´¢å¼•0å¤„æ’å…¥ [Banana, Apple]
  list.addFirst("Mango"); // æ·»åŠ åˆ°å¼€å¤´ [Mango, Banana, Apple]
  list.addLast("Orange"); // æ·»åŠ åˆ°æœ«å°¾ [Mango, Banana, Apple, Orange]
  ```

- **åˆ é™¤å…ƒç´ **

  ```java
  list.remove("Banana");   // åˆ é™¤æŒ‡å®šå…ƒç´  [Mango, Apple, Orange]
  list.remove(1);          // åˆ é™¤ç´¢å¼•1å¤„çš„å…ƒç´  [Mango, Orange]
  list.removeFirst();      // åˆ é™¤é¦–å…ƒç´  [Orange]
  list.removeLast();       // åˆ é™¤å°¾å…ƒç´  []
  ```

- **è·å–ä¸æŸ¥è¯¢å…ƒç´ **

  ```
  LinkedList<String> list = new LinkedList<>();
  list.add("A");
  list.add("B");
  list.add("C");
  
  String element = list.get(1); // è·å–ç´¢å¼•1çš„å…ƒç´ ï¼Œè¿”å› "B"
  String first = list.getFirst(); // è·å–ç¬¬ä¸€ä¸ªå…ƒç´  "A"
  String last = list.getLast();  // è·å–æœ€åä¸€ä¸ªå…ƒç´  "C"
  boolean hasB = list.contains("B"); // åˆ¤æ–­æ˜¯å¦åŒ…å« "B"ï¼Œè¿”å› true
  int indexOfB = list.indexOf("B"); // æŸ¥æ‰¾ "B" ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œè¿”å› 1
  ```

#### 2. ä½œä¸º Queue/Deque çš„é˜Ÿåˆ—å’Œæ ˆæ“ä½œ

è¿™æ˜¯ LinkedList çš„ç‰¹è‰²åŠŸèƒ½ï¼Œéå¸¸å®ç”¨ã€‚

- **ä½œä¸ºé˜Ÿåˆ—ï¼ˆFIFO: å…ˆè¿›å…ˆå‡ºï¼‰**

  ```
  Queue<String> queue = new LinkedList<>();
  queue.offer("First");  // å…¥é˜Ÿï¼Œæ·»åŠ åˆ°é˜Ÿå°¾
  queue.offer("Second");
  String head = queue.peek(); // è·å–é˜Ÿé¦–å…ƒç´ ä½†ä¸ç§»é™¤ï¼Œè¿”å› "First"
  String out = queue.poll();  // å‡ºé˜Ÿï¼Œç§»é™¤å¹¶è¿”å›é˜Ÿé¦–å…ƒç´  "First"
  ```

- **ä½œä¸ºæ ˆï¼ˆLIFO: åè¿›å…ˆå‡ºï¼‰**

  ```
  Deque<String> stack = new LinkedList<>();
  stack.push("Element1"); // å‹æ ˆï¼Œç›¸å½“äº addFirst
  stack.push("Element2");
  String top = stack.peek(); // è·å–æ ˆé¡¶å…ƒç´ ä½†ä¸ç§»é™¤ï¼Œè¿”å› "Element2"
  String pop = stack.pop();  // å¼¹æ ˆï¼Œç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´  "Element2"
  ```

------

## ArrayListå’ŒLinkListçš„æ¯”è¾ƒâ­â­â­â­â­

![image-20251003213423109](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251003213423109.png)

------

## Setæ¥å£å’Œå¸¸ç”¨æ–¹æ³•

Setæ¥å£æ˜¯Javaé›†åˆæ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„æˆå‘˜ï¼Œå®ƒä¸“é—¨ç”¨äºå­˜å‚¨**ä¸é‡å¤çš„å…ƒç´ **ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†Setæ¥å£çš„æ ¸å¿ƒç‰¹æ€§å’Œä¸»è¦å®ç°ç±»çš„å¯¹æ¯”ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ã€‚

| ç‰¹æ€§/å®ç°ç±»      | **HashSet**                            | **LinkedHashSet**             | **TreeSet**                        |
| :--------------- | :------------------------------------- | :---------------------------- | :--------------------------------- |
| **åº•å±‚å®ç°**     | åŸºäº HashMap (å“ˆå¸Œè¡¨)                  | ç»§æ‰¿ HashSetï¼Œä½¿ç”¨é“¾è¡¨+å“ˆå¸Œè¡¨ | åŸºäº TreeMap (çº¢é»‘æ ‘)              |
| **å…ƒç´ é¡ºåº**     | ==**æ— åº**==ï¼Œä¸ä¿è¯æ’å…¥å’Œéå†é¡ºåºä¸€è‡´ | ==**æŒ‰æ’å…¥é¡ºåº**==æ’åˆ—        | ==**æŒ‰è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåº**==æ’åº |
| **çº¿ç¨‹å®‰å…¨**     | å¦                                     | å¦                            | å¦                                 |
| **å…è®¸nullå…ƒç´ ** | æ˜¯ (æœ€å¤šä¸€ä¸ª)                          | æ˜¯ (æœ€å¤šä¸€ä¸ª)                 | å¦ (JDK7+)                         |
| **æ€§èƒ½ç‰¹ç‚¹**     | ==å¢åˆ æŸ¥==éå¸¸å¿«ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ O(1)  | æ€§èƒ½ç•¥ä½äºHashSetï¼Œä½†éå†å¿«   | å¢åˆ æŸ¥æ…¢ï¼Œæ—¶é—´å¤æ‚åº¦ O(log n)      |
| **é€‚ç”¨åœºæ™¯**     | ==å¿«é€Ÿå»é‡ï¼Œä¸å…³å¿ƒé¡ºåº==               | å»é‡ä¸”éœ€è¦ä¿ç•™æ’å…¥é¡ºåº        | éœ€è¦å…ƒç´ æ’åºæˆ–èŒƒå›´æŸ¥è¯¢             |

###  Set æ¥å£æ ¸å¿ƒç‰¹æ€§

Setæ¥å£çš„æ ¸å¿ƒç‰¹æ€§æºäºå…¶å®šä¹‰ï¼Œç†è§£è¿™äº›ç‰¹æ€§æ˜¯æ­£ç¡®ä½¿ç”¨å®ƒçš„å…³é”®ï¼š

1. **å…ƒç´ å”¯ä¸€æ€§**ï¼šè¿™æ˜¯Setæœ€æ ¹æœ¬çš„ç‰¹æ€§ã€‚å®ƒä¸å…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ã€‚å½“ä½ è¯•å›¾æ·»åŠ ä¸€ä¸ªå·²ç»å­˜åœ¨äºSetä¸­çš„å…ƒç´ æ—¶ï¼Œ`add()`æ–¹æ³•ä¼šè¿”å›`false`ï¼Œä¸”é›†åˆå†…å®¹ä¸ä¼šæ”¹å˜ã€‚å®ƒåˆ¤æ–­å…ƒç´ æ˜¯å¦é‡å¤ï¼Œä¾èµ–äºå¯¹è±¡çš„`equals()`å’Œ`hashCode()`æ–¹æ³•ï¼Œè€Œéç®€å•çš„`==`è¿ç®—ç¬¦ã€‚
2. **æ— åºæ€§**ï¼šè¿™é‡Œçš„â€œæ— åºâ€æŒ‡çš„æ˜¯**ä¸ä¿è¯å…ƒç´ å­˜å…¥çš„é¡ºåºå’Œå–å‡ºçš„é¡ºåºä¸€è‡´**ã€‚ç‰¹åˆ«æ˜¯æœ€å¸¸ç”¨çš„`HashSet`ï¼Œå…¶å…ƒç´ çš„å­˜å‚¨ä½ç½®ç”±å“ˆå¸Œå€¼å†³å®šï¼Œå› æ­¤éå†é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`LinkedHashSet`å’Œ`TreeSet`æ˜¯ä¾‹å¤–ï¼Œå®ƒä»¬ä¼šç»´æŠ¤æŸç§ç‰¹å®šçš„é¡ºåºã€‚
3. **æ— ç´¢å¼•**ï¼šä¸Listä¸åŒï¼ŒSetä¸æä¾›é€šè¿‡æ•´æ•°ç´¢å¼•ï¼ˆå¦‚`get(int index)`ï¼‰æ¥ç›´æ¥è®¿é—®å…ƒç´ çš„æ–¹æ³•ã€‚ä½ å¿…é¡»ä½¿ç”¨è¿­ä»£å™¨æˆ–å¢å¼ºå‹forå¾ªç¯æ¥éå†æ‰€æœ‰å…ƒç´ ã€‚

### Set æ¥å£å¸¸ç”¨æ–¹æ³•è¯¦è§£

```java
Set<String> set = new HashSet<>();
set.add("Apple");  // è¿”å› true
set.add("Banana"); // è¿”å› true
set.add("Apple");  // è¿”å› falseï¼Œå› ä¸º"Apple"å·²å­˜åœ¨
```

- **`boolean remove(Object o)`**
  - **åŠŸèƒ½**ï¼šå¦‚æœæŒ‡å®šå…ƒç´ å­˜åœ¨ï¼Œåˆ™ä»æ­¤é›†åˆä¸­ç§»é™¤è¯¥å…ƒç´ ã€‚
  - **è¿”å›å€¼**ï¼šå¦‚æœé›†åˆåŒ…å«è¯¥å…ƒç´ å¹¶è¢«ç§»é™¤ï¼Œåˆ™è¿”å›`true`ã€‚
  - **ç¤ºä¾‹**ï¼š`set.remove("Banana"); // è¿”å› true`
- **`boolean contains(Object o)`**
  - **åŠŸèƒ½**ï¼šåˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ã€‚
  - **è¿”å›å€¼**ï¼šåŒ…å«åˆ™è¿”å›`true`ã€‚
  - **ç¤ºä¾‹**ï¼š`set.contains("Apple"); // è¿”å› true`
- **`int size()`**
  - **åŠŸèƒ½**ï¼šè¿”å›é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚
  - **ç¤ºä¾‹**ï¼š`int count = set.size(); // å‡è®¾æ­¤æ—¶ count ä¸º 2`
- **`boolean isEmpty()`**
  - **åŠŸèƒ½**ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©ºï¼ˆä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼‰ã€‚
  - **ç¤ºä¾‹**ï¼š`if (set.isEmpty()) { ... }`
- **`void clear()`**
  - **åŠŸèƒ½**ï¼šæ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚
  - **ç¤ºä¾‹**ï¼š`set.clear(); // æ¸…ç©ºåï¼Œset.size() ä¸º 0`

### éå†Seté›†åˆ

ç”±äºSetæ²¡æœ‰ç´¢å¼•ï¼Œéå†å¿…é¡»ä½¿ç”¨è¿­ä»£å™¨æˆ–å¢å¼ºforå¾ªç¯ã€‚

- **å¢å¼ºforå¾ªç¯ (æ¨è)**ï¼š

  ```java
  for (String element : set) {
      System.out.println(element);
  }
  ```

- **ä½¿ç”¨Iteratorè¿­ä»£å™¨**ï¼š

  ```java
  Iterator<String> iterator = set.iterator();
  while (iterator.hasNext()) {
      String element = iterator.next();
      System.out.println(element);
      // å¯ä»¥ä½¿ç”¨ iterator.remove() å®‰å…¨åœ°åˆ é™¤å½“å‰å…ƒç´ 
  }
  ```

### Seté€‰æ‹©å»ºè®®

<img src="E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251003221225212.png" alt="image-20251003221225212" style="zoom: 33%;" />

## æ— åºHashSetç±»(Setå­ç±»)

###  åˆ›å»ºHashSetå¯¹è±¡

ä½¿ç”¨`new`å…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ªHashSetã€‚åœ¨å°–æ‹¬å·`<>`ä¸­æŒ‡å®šé›†åˆä¸­è¦å­˜å‚¨çš„å…ƒç´ ç±»å‹ï¼ˆä¾‹å¦‚`String`, `Integer`ï¼‰ï¼Œè¿™ç§°ä¸ºæ³›å‹ï¼Œå®ƒä¿è¯äº†ç±»å‹å®‰å…¨ã€‚

```java
HashSet<String> sites = new HashSet<>(); // åˆ›å»ºä¸€ä¸ªç”¨äºå­˜æ”¾å­—ç¬¦ä¸²çš„HashSet[5](@ref)
```

### æ·»åŠ å…ƒç´ ï¼š`add()`æ–¹æ³•

ä½¿ç”¨`add()`æ–¹æ³•å‘é›†åˆä¸­æ·»åŠ å…ƒç´ ã€‚å¦‚æœå°è¯•æ·»åŠ ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å…ƒç´ ï¼Œæ“ä½œä¸ä¼šæˆåŠŸï¼Œä¸”æ–¹æ³•ä¼šè¿”å›`false`ã€‚

```java
sites.add("Google");
sites.add("Bing");
sites.add("Baidu");
sites.add("Google"); // è¿™ä¸ªé‡å¤çš„"Google"ä¸ä¼šè¢«æ·»åŠ è¿›å»[5,10](@ref)
System.out.println(sites); // è¾“å‡ºå¯èƒ½æ˜¯ [Google, Baidu, Bing] æˆ–å…¶ä»–é¡ºåº
```

#### âš–ï¸ æ·»åŠ ä¸åŒç±»å‹å¯¹è±¡çš„åŒºåˆ«

HashSet åˆ¤æ–­å…ƒç´ æ˜¯å¦é‡å¤ï¼Œä¸¥é‡ä¾èµ–äºå¯¹è±¡çš„ ==`hashCode()`å’Œ `equals()`æ–¹æ³•==ã€‚å¯¹äºä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„è¡Œä¸ºå·®å¼‚å¯¼è‡´äº†æ·»åŠ ç»“æœçš„ä¸åŒã€‚

##### **æ·»åŠ  `new String()`ä¸ç›´æ¥æ·»åŠ å­—ç¬¦ä¸²å­—é¢é‡**

- **å…³é”®ç‚¹**ï¼š`String`ç±»å·²ç»é‡å†™äº† `hashCode()`å’Œ `equals()`æ–¹æ³•ï¼Œå…¶è®¡ç®—ä¾æ®æ˜¯å­—ç¬¦ä¸²çš„ **å†…å®¹**ï¼Œè€Œéå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚
- **`new String("abc")`å’Œ `new String("abc")`**ï¼šè™½ç„¶æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼ˆä½¿ç”¨ `==`æ¯”è¾ƒè¿”å› `false`ï¼‰ï¼Œä½†å› ä¸ºå®ƒä»¬çš„å†…å®¹ç›¸åŒï¼Œæ‰€ä»¥ `hashCode()`è¿”å›å€¼ç›¸åŒï¼Œ`equals()`æ¯”è¾ƒè¿”å› `true`ã€‚å› æ­¤==HashSet ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯é‡å¤å…ƒç´ ï¼Œç¬¬äºŒä¸ªä¸ä¼šè¢«æ·»åŠ ==ã€‚
- **ç›´æ¥æ·»åŠ å­—ç¬¦ä¸²å­—é¢é‡**ï¼šä¾‹å¦‚ `add("abc")`ã€‚åœ¨ Java ä¸­ï¼Œå†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡å¯èƒ½è¢«ç¼–è¯‘å™¨ä¼˜åŒ–æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå­—ç¬¦ä¸²é©»ç•™æœºåˆ¶ï¼‰ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œåªè¦å†…å®¹ç›¸åŒï¼Œåœ¨ HashSet çœ‹æ¥å°±æ˜¯é‡å¤çš„ã€‚æ‰€ä»¥ **`new String("abc")`å’Œ å­—ç¬¦ä¸²å­—é¢é‡ `"abc"`ä¹Ÿä¼šè¢« HashSet è§†ä¸ºé‡å¤å…ƒç´ **ã€‚

##### **æ·»åŠ è‡ªå®šä¹‰ç±»å¯¹è±¡**

- **å…³é”®ç‚¹**ï¼šå¦‚æœä½ æ²¡æœ‰åœ¨è‡ªå®šä¹‰ç±»ä¸­é‡å†™ `hashCode()`å’Œ `equals()`æ–¹æ³•ï¼Œå®ƒä»¬å°†ç»§æ‰¿è‡ª `Object`ç±»ã€‚`Object`ç±»ä¸­çš„é»˜è®¤å®ç°æ˜¯åŸºäºå¯¹è±¡çš„ **å†…å­˜åœ°å€**ã€‚

- **æœªé‡å†™çš„æƒ…å†µ**ï¼šå³ä½¿ä¸¤ä¸ªè‡ªå®šä¹‰å¯¹è±¡çš„æ‰€æœ‰å­—æ®µå€¼éƒ½ç›¸åŒï¼ˆé€»è¾‘ä¸Šç›¸ç­‰ï¼‰ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åˆ†åˆ« `new`å‡ºæ¥çš„ï¼Œå†…å­˜åœ°å€ä¸åŒï¼Œæ‰€ä»¥é»˜è®¤çš„ `hashCode()`è¿”å›å€¼å¾ˆå¯èƒ½ä¸åŒï¼Œ`equals()`æ¯”è¾ƒä¹Ÿä¼šè¿”å› `false`ã€‚HashSet ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œä»è€Œéƒ½èƒ½æ·»åŠ è¿›å»ã€‚è¿™é€šå¸¸ **ä¸ç¬¦åˆ Set é›†åˆå…ƒç´ å”¯ä¸€çš„é¢„æœŸ**ã€‚

- **æ­£ç¡®é‡å†™å**ï¼šä¸ºäº†è®© HashSet èƒ½æ­£ç¡®åˆ¤æ–­è‡ªå®šä¹‰å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œä½ å¿…é¡»åœ¨è¯¥ç±»ä¸­é‡å†™ `hashCode()`å’Œ `equals()`æ–¹æ³•ã€‚é‡å†™æ—¶ï¼Œåº”ç¡®ä¿é€»è¾‘ä¸Šç›¸ç­‰çš„å¯¹è±¡è¿”å›ç›¸åŒçš„å“ˆå¸Œç ï¼Œå¹¶ä¸” `equals()`æ–¹æ³•è¿”å› `true`ã€‚ä¸€ä¸ªå¸¸è§çš„é‡å†™ä¾‹å­å¦‚ä¸‹ï¼ˆä»¥ `User`ç±»ä¸ºä¾‹ï¼‰ï¼š

  ```java
  @Override
  public int hashCode() {
      // ä½¿ç”¨ Objects.hash æ–¹ä¾¿åœ°ç»„åˆå¤šä¸ªå­—æ®µçš„å“ˆå¸Œå€¼
      return Objects.hash(name, age);
  }
  
  @Override
  public boolean equals(Object obj) {
      if (this == obj) return true;
      if (obj == null || getClass() != obj.getClass()) return false;
      User other = (User) obj;
      // æ¯”è¾ƒæ‰€æœ‰ç›¸å…³å­—æ®µæ˜¯å¦ç›¸ç­‰
      return age == other.age && Objects.equals(name, other.name);
  }
  ```

  é‡å†™åï¼Œåªè¦ä¸¤ä¸ª `User`å¯¹è±¡çš„ `name`å’Œ `age`ç›¸åŒï¼ŒHashSet å°±ä¼šæ­£ç¡®è¯†åˆ«ä¸ºé‡å¤å…ƒç´ ã€‚

## HashSetæ·»åŠ å…ƒç´ çš„åº•å±‚æºç â­â­â­â­â­

HashSetåº•å±‚æ˜¯HashMapï¼ŒHashMapåº•å±‚æ˜¯(æ•°ç»„ï¼‹é“¾è¡¨ï¼‹çº¢é»‘æ ‘)

==å…ˆç®—hasCodeï¼ŒhashCodeè½¬æˆçš„ç´¢å¼•ç›¸åŒçš„è¯ï¼Œæ¯”è¾ƒequals ä¸åŒçš„è¯æ·»åŠ è¿›å»ã€‚==

![image-20251004103846898](E:/æ¡Œé¢/JAVA/hspJAVA.assets/image-20251004103846898.png)

#### 1. HashSet çš„åº•å±‚ç»“æ„ï¼šHashMap

è¿™æ˜¯ç†è§£ `HashSet`æ‰€æœ‰è¡Œä¸ºçš„åŸºçŸ³ã€‚

- **â€œHashSet åº•å±‚æ˜¯ HashMapâ€**ï¼šè¿™æ„å‘³ç€ä½ åˆ›å»ºä¸€ä¸ª `HashSet`æ—¶ï¼Œå®ƒå†…éƒ¨å…¶å®å°è£…äº†ä¸€ä¸ª `HashMap`å¯¹è±¡ã€‚
- **`HashSet`çš„å…ƒç´ å»å“ªäº†ï¼Ÿ**ï¼šå½“ä½ è°ƒç”¨ `hashSet.add("abc")`æ—¶ï¼Œå†…éƒ¨çš„ `HashMap`ä¼šæ‰§è¡Œ `map.put("abc", PRESENT)`ã€‚è¿™é‡Œçš„ `"abc"`æˆä¸ºäº† `HashMap`çš„ **Key**ï¼Œè€Œ **Value** åˆ™æ˜¯ä¸€ä¸ªå›ºå®šçš„ã€æ— å®é™…æ„ä¹‰çš„é™æ€å¯¹è±¡ã€‚æ­£å› ä¸º `HashMap`çš„ **Key** æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ `HashSet`å¤©ç„¶å°±å…·æœ‰äº†å…ƒç´ å”¯ä¸€çš„ç‰¹æ€§ã€‚

#### 2. æ·»åŠ å…ƒç´ çš„è¯¦ç»†æµç¨‹

è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ `HashMap`å­˜å…¥ Key çš„è¿‡ç¨‹ï¼Œä¸‹å›¾ç›´è§‚å†ç°äº†ä»è®¡ç®—å“ˆå¸Œå€¼åˆ°æœ€ç»ˆå†³å®šæ·»åŠ æˆ–æ”¾å¼ƒçš„å®Œæ•´é€»è¾‘é“¾ï¼š

ç°åœ¨æˆ‘ä»¬æ¥åˆ†è§£å›¾ä¸­çš„æ¯ä¸€æ­¥ï¼š

- **ç¬¬2ç‚¹ï¼šå¾—åˆ°å“ˆå¸Œå€¼ï¼Œè½¬ä¸ºç´¢å¼•å€¼**
  - **å¾—åˆ°å“ˆå¸Œå€¼**ï¼šé¦–å…ˆï¼Œå®ƒä¼šè°ƒç”¨å¾…æ·»åŠ å…ƒç´ çš„ `hashCode()`æ–¹æ³•ï¼Œè®¡ç®—å‡ºä¸€ä¸ªæ•´å‹çš„å“ˆå¸Œå€¼ã€‚
  - **è½¬ä¸ºç´¢å¼•å€¼**ï¼šè¿™ä¸ªå“ˆå¸Œå€¼é€šå¸¸å¾ˆå¤§ï¼Œä¸èƒ½ç›´æ¥ä½œä¸ºæ•°ç»„ä¸‹æ ‡ã€‚å®ƒä¼šé€šè¿‡ä¸€ä¸ªæ‰°åŠ¨å‡½æ•°ï¼ˆä¸ºäº†å‡å°‘å“ˆå¸Œå†²çªï¼‰å’Œæ¨¡è¿ç®—ï¼ˆå¦‚ `ç´¢å¼• = (æ•°ç»„é•¿åº¦ - 1) & hash`ï¼‰ï¼Œæœ€ç»ˆæ˜ å°„åˆ°åº•å±‚æ•°ç»„ï¼ˆ`table`ï¼‰çš„ä¸€ä¸ªå…·ä½“ä½ç½®ä¸Šã€‚è¿™ä¸ªä½ç½®å°±æ˜¯å…ƒç´ å°†è¦å­˜æ”¾çš„â€œæ¡¶â€ã€‚
- **ç¬¬3ã€4ç‚¹ï¼šæ£€æŸ¥ä½ç½®å¹¶ç›´æ¥åŠ å…¥**
  - ç³»ç»Ÿä¼šå»æ£€æŸ¥è®¡ç®—å‡ºçš„é‚£ä¸ªç´¢å¼•ä½ç½®æ˜¯å¦ä¸ºç©ºã€‚
  - **å¦‚æœä¸ºç©º**ï¼šè¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°è¿™ä¸ªå“ˆå¸Œå€¼çš„å…ƒç´ ï¼Œæ²¡æœ‰å‘ç”Ÿå†²çªã€‚å¤ªå¥½äº†ï¼ç›´æ¥åœ¨è¿™ä¸ªä½ç½®åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼ŒæŠŠå…ƒç´ æ”¾è¿›å»ã€‚æ·»åŠ æˆåŠŸã€‚
- **ç¬¬5ç‚¹ï¼šå¤„ç†å“ˆå¸Œå†²çªï¼ˆè¯¥ä½ç½®å·²æœ‰å…ƒç´ ï¼‰**
  - **å¦‚æœè¯¥ä½ç½®ä¸ä¸ºç©º**ï¼šè¯´æ˜å‘ç”Ÿäº†â€œå“ˆå¸Œå†²çªâ€ï¼Œå³ä¸åŒçš„å…ƒç´ è®¡ç®—å‡ºäº†ç›¸åŒçš„æ•°ç»„ç´¢å¼•ã€‚
  - è¿™æ—¶ï¼Œ`HashSet`ä¼šè°ƒç”¨ `equals()`æ–¹æ³•è¿›è¡Œç²¾ç¡®æ¯”è¾ƒï¼šï¼ˆeqalsä¸æ˜¯ç®€å•çš„æ¯”è¾ƒï¼ŒDogsç±»å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªç”±é‡å†™ï¼‰
    - **å¦‚æœ `equals()`è¿”å› `true`**ï¼šè¯´æ˜ä¸¤ä¸ªå…ƒç´ æ˜¯â€œç›¸ç­‰çš„â€ï¼ˆæ ¹æ®ä½ çš„ä¸šåŠ¡é€»è¾‘å®šä¹‰ï¼‰ã€‚`HashSet`ä¼š**æ”¾å¼ƒæ·»åŠ **è¿™ä¸ªæ–°å…ƒç´ ï¼Œå› ä¸ºå®ƒè¦ä¿è¯å”¯ä¸€æ€§ã€‚
    - **å¦‚æœ `equals()`è¿”å› `false`**ï¼šè¯´æ˜ä¸¤ä¸ªå…ƒç´ åªæ˜¯å“ˆå¸Œå€¼å†²çªäº†ï¼Œä½†æœ¬èº«å¹¶ä¸ç›¸åŒã€‚è¿™æ—¶ï¼Œæ–°å…ƒç´ ä¼šä»¥**é“¾è¡¨**çš„å½¢å¼æ·»åŠ åˆ°è¿™ä¸ªä½ç½®å·²æœ‰å…ƒç´ çš„åé¢ã€‚

## HashSetçš„æ‰©å®¹å’Œè½¬æˆçº¢é»‘æ ‘æœºåˆ¶

- **é¦–æ¬¡æ·»åŠ æ—¶çš„åˆå§‹åŒ–**ï¼šå½“ç¬¬ä¸€æ¬¡è°ƒç”¨`add()`æ–¹æ³•æ—¶ï¼Œåº•å±‚çš„`HashMap`ä¼šåˆå§‹åŒ–å®ƒçš„å­˜å‚¨æ•°ç»„ï¼ˆç§°ä¸º`table`ï¼‰ã€‚å¦‚PPTæ‰€ç¤ºï¼Œåˆå§‹å®¹é‡ä¸º**16**ã€‚
- **ä¸´ç•Œå€¼çš„è®¡ç®—**ï¼šä¸´ç•Œå€¼ = å®¹é‡ Ã— è´Ÿè½½å› å­ã€‚é»˜è®¤è´Ÿè½½å› å­æ˜¯**0.75**ï¼Œæ‰€ä»¥åˆå§‹ä¸´ç•Œå€¼ = 16 * 0.75 = **12**ã€‚è¿™ä¸ªå€¼å†³å®šäº†ä½•æ—¶éœ€è¦æ‰©å®¹ã€‚

### æ‰©å®¹æœºåˆ¶ï¼šåŠ¨æ€å¢é•¿ä»¥ä¿æŒæ€§èƒ½

å½“å…ƒç´ è¶Šæ¥è¶Šå¤šæ—¶ï¼Œä¸ºäº†å‡å°‘å“ˆå¸Œå†²çªã€ä¿è¯æ“ä½œæ•ˆç‡ï¼Œ`HashSet`ï¼ˆå®é™…ä¸Šæ˜¯åº•å±‚çš„`HashMap`ï¼‰éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚

- **è§¦å‘æ¡ä»¶**ï¼šå½“`HashSet`ä¸­çš„å…ƒç´ æ•°é‡ï¼ˆ==ä¸ä»…ä»…æ˜¯`table`æ•°ç»„è¢«å ç”¨çš„ä½ç½®ï¼Œè€Œæ˜¯æ‰€æœ‰å…ƒç´ çš„æ€»æ•°==ï¼‰**è¶…è¿‡ä¸´ç•Œå€¼**æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹ã€‚å¦‚å›¾ä¸­ä¾‹å­ï¼Œå½“æ·»åŠ ç¬¬13ä¸ªå…ƒç´ æ—¶ï¼Œå½“å‰å®¹é‡16å’Œä¸´ç•Œå€¼12å·²æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚
- **æ‰©å®¹æ–¹å¼**ï¼šæ‰©å®¹ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ›´å¤§çš„æ•°ç»„ã€‚æ–°å®¹é‡é€šå¸¸æ˜¯æ—§å®¹é‡çš„**2å€**ï¼ˆ16 -> 32ï¼‰ã€‚è¿™æ˜¯ä¸€ç§æƒè¡¡ï¼Œæ—¢é¿å…é¢‘ç¹æ‰©å®¹ï¼Œåˆä¸ä¼šæµªè´¹å¤ªå¤šå†…å­˜ã€‚
- **é‡æ–°æ•£åˆ—**ï¼šæ‰©å®¹åï¼Œæ‰€æœ‰å·²å­˜åœ¨çš„å…ƒç´ éœ€è¦é‡æ–°è®¡ç®—å…¶åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå¹¶ç§»åŠ¨è¿‡å»ã€‚è¿™ä¸ªè¿‡ç¨‹å¼€é”€è¾ƒå¤§ï¼Œå› æ­¤å¦‚æœèƒ½é¢„ä¼°å…ƒç´ æ•°é‡ï¼Œåœ¨åˆ›å»º`HashSet`æ—¶æŒ‡å®šä¸€ä¸ªåˆé€‚çš„åˆå§‹å®¹é‡æ˜¯æå‡æ€§èƒ½çš„å¥½ä¹ æƒ¯ã€‚
- **æ›´æ–°ä¸´ç•Œå€¼**ï¼šæ‰©å®¹åï¼Œä¸´ç•Œå€¼ä¹Ÿä¼šé‡æ–°è®¡ç®—ï¼šæ–°ä¸´ç•Œå€¼ = æ–°å®¹é‡ Ã— è´Ÿè½½å› å­ = 32 * 0.75 = **24**ã€‚

### æ ‘åŒ–ï¼šåº”å¯¹å¤§é‡å“ˆå¸Œå†²çªçš„ä¼˜åŒ–

è¿™æ˜¯Java 8å¼•å…¥çš„é‡è¦ä¼˜åŒ–ï¼Œç”¨äºè§£å†³å½“å“ˆå¸Œå†²çªä¸¥é‡æ—¶ï¼Œé“¾è¡¨è¿‡é•¿å¯¼è‡´çš„æŸ¥è¯¢æ€§èƒ½ä¸‹é™é—®é¢˜ã€‚

- **é—®é¢˜åœºæ™¯**ï¼šä¸åŒçš„å…ƒç´ å¯èƒ½è®¡ç®—å‡ºç›¸åŒçš„æ•°ç»„ç´¢å¼•ï¼Œä»è€Œåœ¨åŒä¸€ä¸ªä½ç½®å½¢æˆé“¾è¡¨ã€‚å¦‚æœé“¾è¡¨å¾ˆé•¿ï¼Œéå†æŸ¥æ‰¾çš„æ•ˆç‡ä¼šä»O(1)é€€åŒ–ä¸ºO(n)ã€‚
- **æ ‘åŒ–æ¡ä»¶ï¼ˆä¸¤ä¸ªæ¡ä»¶å¿…é¡»åŒæ—¶æ»¡è¶³ï¼‰**ï¼š
  1. ==**é“¾è¡¨é•¿åº¦è¾¾åˆ° 8**ã€‚==
  2. ==**å½“å‰`table`æ•°ç»„çš„æ€»é•¿åº¦è¾¾åˆ° 64**==ã€‚
- **æ ‘åŒ–è¡ŒåŠ¨**ï¼šå½“åŒæ—¶æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶æ—¶ï¼Œå°†è¯¥ä½ç½®çš„é“¾è¡¨è½¬æ¢ä¸ºä¸€é¢—**çº¢é»‘æ ‘**ã€‚
- **ç›®çš„**ï¼šçº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå³ä½¿æ•°æ®é‡è¾ƒå¤§ï¼Œå…¶æŸ¥æ‰¾ã€æ’å…¥çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿèƒ½ç»´æŒåœ¨O(log n)ï¼Œè¿œä¼˜äºé•¿é“¾è¡¨çš„O(n)ã€‚
- **å¦åˆ™æ‰©å®¹**ï¼šå¦‚æœé“¾è¡¨é•¿åº¦è¾¾åˆ°8ï¼Œä½†æ•°ç»„æ€»é•¿åº¦æœªè¾¾åˆ°64ï¼ŒHashMapä¼šé€‰æ‹©**ä¼˜å…ˆæ‰©å®¹**ã€‚å› ä¸ºæ‰©å®¹å¯èƒ½ä¼šå°†åŸæœ¬å†²çªçš„å…ƒç´ é‡æ–°åˆ†æ•£åˆ°ä¸åŒçš„ä½ç½®ï¼Œä»è€Œç›´æ¥ç¼©çŸ­é“¾è¡¨é•¿åº¦ï¼Œè¿™æ˜¯ä¸€ç§æˆæœ¬å¯èƒ½æ›´ä½çš„è§£å†³æ–¹å¼ã€‚

## HashSetçš„å®è·µ

![image-20251005094917708](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005094917708.png)

```java
import java.util.HashSet;
import java.util.Objects;

// Employeeç±»
class Employee {
    private String name;
    private int age;
    
    // æ„é€ æ–¹æ³•
    public Employee(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    // getteræ–¹æ³•
    public String getName() { return name; }
    public int getAge() { return age; }
    
    // å…³é”®æ­¥éª¤1ï¼šé‡å†™hashCodeæ–¹æ³•
    @Override
    public int hashCode() {
        // ä½¿ç”¨Objects.hash()æ–¹æ³•ï¼ŒåŸºäºnameå’Œageè®¡ç®—å“ˆå¸Œå€¼
        return Objects.hash(name, age);
    }
    
    // å…³é”®æ­¥éª¤2ï¼šé‡å†™equalsæ–¹æ³•
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true; // å¦‚æœæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œç›´æ¥è¿”å›true
        if (obj == null || getClass() != obj.getClass()) return false; // å¦‚æœå¯¹è±¡ä¸ºnullæˆ–ç±»å‹ä¸åŒ
        
        Employee other = (Employee) obj; // ç±»å‹è½¬æ¢
        
        // æ¯”è¾ƒnameå’Œageæ˜¯å¦éƒ½ç›¸ç­‰
        return age == other.age && Objects.equals(name, other.name);
    }
    
    // å¯é€‰ï¼šé‡å†™toStringæ–¹æ³•ï¼Œæ–¹ä¾¿è¾“å‡ºæŸ¥çœ‹
    @Override
    public String toString() {
        return "Employee{name='" + name + "', age=" + age + "}";
    }
}

// æµ‹è¯•ç±»
public class HashSetExercise {
    public static void main(String[] args) {
        HashSet<Employee> employees = new HashSet<>();
        
        // åˆ›å»º3ä¸ªEmployeeå¯¹è±¡
        Employee emp1 = new Employee("å¼ ä¸‰", 25);
        Employee emp2 = new Employee("æå››", 30);
        Employee emp3 = new Employee("å¼ ä¸‰", 25); // ä¸emp1ç›¸åŒ
        
        // æ·»åŠ åˆ°HashSet
        System.out.println("æ·»åŠ emp1: " + employees.add(emp1)); // è¾“å‡ºtrue
        System.out.println("æ·»åŠ emp2: " + employees.add(emp2)); // è¾“å‡ºtrue
        System.out.println("æ·»åŠ emp3: " + employees.add(emp3)); // è¾“å‡ºfalseï¼ˆé‡å¤ï¼Œæ·»åŠ å¤±è´¥ï¼‰
        
        // éªŒè¯ç»“æœ
        System.out.println("æœ€ç»ˆé›†åˆå¤§å°: " + employees.size()); // è¾“å‡º2
        System.out.println("é›†åˆå†…å®¹: " + employees);
    }
}
```

### æ‰©å±•

![image-20251005100021556](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005100021556.png)

```java
import java.util.HashSet;
import java.util.Objects;

// 1. å®šä¹‰ MyDate ç±»
class MyDate {
    private int year;
    private int month;
    private int day;

    public MyDate(int year, int month, int day) {
        this.year = year;
        this.month = month;
        this.day = day;
    }

    // å…³é”®ï¼šä¸º MyDate ç±»é‡å†™ hashCode å’Œ equals
    // è¿™æ ·ï¼Œå½“ä¸”ä»…å½“å¹´ã€æœˆã€æ—¥éƒ½ç›¸åŒæ—¶ï¼Œä¸¤ä¸ª MyDate å¯¹è±¡æ‰è¢«è§†ä¸ºç›¸ç­‰
    @Override
    public int hashCode() {
        return Objects.hash(year, month, day);
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        MyDate myDate = (MyDate) o;
        return year == myDate.year &&
                month == myDate.month &&
                day == myDate.day;
    }

    // å¯é€‰ï¼šé‡å†™ toString æ–¹ä¾¿æŸ¥çœ‹ç»“æœ
    @Override
    public String toString() {
        return year + "-" + month + "-" + day;
    }
}

// 2. å®šä¹‰ Employee ç±»
class Employee {
    private String name;
    private double sal;
    private MyDate birthday;

    public Employee(String name, double sal, MyDate birthday) {
        this.name = name;
        this.sal = sal;
        this.birthday = birthday;
    }

    // å…³é”®ï¼šä¸º Employee ç±»é‡å†™ hashCode å’Œ equals
    // åˆ¤æ–­ä¾æ®æ˜¯ name å’Œ birthday æ˜¯å¦éƒ½ç›¸ç­‰
    @Override
    public int hashCode() {
        return Objects.hash(name, birthday);
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Employee employee = (Employee) o;
        return Objects.equals(name, employee.name) &&
                Objects.equals(birthday, employee.birthday);
    }

    // å¯é€‰ï¼šé‡å†™ toString æ–¹ä¾¿æŸ¥çœ‹ç»“æœ
    @Override
    public String toString() {
        return "Employee{" +
                "name='" + name + '\'' +
                ", sal=" + sal +
                ", birthday=" + birthday +
                '}';
    }
}

// 3. æµ‹è¯•ç±»
public class HashSetExercise {
    public static void main(String[] args) {
        HashSet<Employee> set = new HashSet<>();

        // åˆ›å»ºå‡ ä¸ª MyDate å¯¹è±¡
        MyDate date1 = new MyDate(1990, 1, 1);
        MyDate date2 = new MyDate(1995, 5, 5);
        MyDate date3 = new MyDate(1990, 1, 1); // ä¸ date1 ç›¸åŒ

        // åˆ›å»º Employee å¯¹è±¡
        Employee emp1 = new Employee("å¼ ä¸‰", 10000, date1);
        Employee emp2 = new Employee("æå››", 12000, date2);
        Employee emp3 = new Employee("å¼ ä¸‰", 15000, date3); // åå­—å’Œç”Ÿæ—¥ä¸ emp1 ç›¸åŒï¼Œä½†å·¥èµ„ä¸åŒ

        // å°è¯•æ·»åŠ åˆ° HashSet
        System.out.println("æ·»åŠ  emp1ï¼ˆå¼ ä¸‰ï¼Œ1990-1-1ï¼‰: " + set.add(emp1)); // è¿”å› true
        System.out.println("æ·»åŠ  emp2ï¼ˆæå››ï¼Œ1995-5-5ï¼‰: " + set.add(emp2)); // è¿”å› true
        System.out.println("æ·»åŠ  emp3ï¼ˆå¼ ä¸‰ï¼Œ1990-1-1ï¼‰: " + set.add(emp3)); // è¿”å› falseï¼å› ä¸ºé‡å¤äº†

        System.out.println("æœ€ç»ˆé›†åˆä¸­çš„å‘˜å·¥æ•°é‡: " + set.size()); // è¾“å‡º 2

        // éå†é›†åˆæŸ¥çœ‹å†…å®¹
        for (Employee emp : set) {
            System.out.println(emp);
        }
    }
}
```

## LinkedHashSet(ä¸é‡å¤ æ’å…¥å’Œå–å‡ºé¡ºåºä¸€è‡´)

### æ ¸å¿ƒç‰¹æ€§ä¸åº•å±‚åŸç†

ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠ LinkedHashSet çœ‹ä½œæ˜¯ **HashSet å’Œ LinkedList çš„ä¼˜ç‚¹ç»“åˆä½“**ã€‚

| ç‰¹æ€§               | è¯´æ˜                                                         |
| :----------------- | :----------------------------------------------------------- |
| **å…ƒç´ å”¯ä¸€æ€§**     | ç»§æ‰¿è‡ª `Set`æ¥å£ï¼Œä¸å…è®¸å­˜å‚¨é‡å¤çš„å…ƒç´ ã€‚                     |
| **æ’å…¥é¡ºåºæœ‰åº**   | å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª**åŒå‘é“¾è¡¨**ï¼Œ==ä¸¥æ ¼æŒ‰ç…§å…ƒç´ è¢«æ·»åŠ åˆ°é›†åˆçš„å…ˆåé¡ºåºæ¥è®°å½•é¡ºåº==ã€‚å½“ä½ éå†é›†åˆæ—¶ï¼Œå…ƒç´ çš„é¡ºåºå°±æ˜¯ä½ çš„æ·»åŠ é¡ºåºã€‚ |
| **å…è®¸ null å…ƒç´ ** | å¯ä»¥å­˜å‚¨ä¸€ä¸ª `null`å…ƒç´ ã€‚                                    |
| **éçº¿ç¨‹å®‰å…¨**     | é»˜è®¤ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹è®¿é—®éœ€è¦å¤–éƒ¨åŒæ­¥ã€‚           |

**åº•å±‚å®ç°**ï¼šæ­£å¦‚æµç¨‹å›¾æ‰€ç¤ºï¼ŒLinkedHashSet çš„åº•å±‚æ˜¯åŸºäº `LinkedHashMap`å®ç°çš„ã€‚å®ƒç»“åˆäº†ï¼š

1. **å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰**ï¼šç”¨äºå¿«é€Ÿå®šä½å…ƒç´ ï¼Œæä¾›äº† `O(1)`æ—¶é—´å¤æ‚åº¦çš„æ·»åŠ ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚
2. **åŒå‘é“¾è¡¨ï¼ˆDoubly-Linked Listï¼‰**ï¼šè´¯ç©¿äºæ‰€æœ‰å…ƒç´ ï¼Œä¸“é—¨ç”¨äºè®°å½•å…ƒç´ çš„**æ’å…¥é¡ºåº**ã€‚è¿™æ­£æ˜¯å®ƒä¸ HashSet æœ€æœ¬è´¨çš„åŒºåˆ«ã€‚

![image-20251005100717109](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005100717109.png)

## Mapæ¥å£

### 1. åŸºæœ¬æ¦‚å¿µ

`Map`æ˜¯Javaé›†åˆæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œå®ƒç”¨äºå­˜å‚¨â€œé”®å€¼å¯¹ï¼ˆKey-Value Pairï¼‰â€æ•°æ®ã€‚æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ªé”®ï¼ˆKeyï¼‰å’Œä¸€ä¸ªå€¼ï¼ˆValueï¼‰ï¼Œé”®æ˜¯å”¯ä¸€çš„ï¼Œä½†å€¼å¯ä»¥é‡å¤ã€‚

**ç®€å•æ¯”å–»**ï¼š

> ä½ å¯ä»¥æŠŠ`Map`æƒ³è±¡æˆä¸€ä¸ªå­—å…¸æˆ–ç”µè¯ç°¿ï¼š
>
> - **é”®ï¼ˆKeyï¼‰**ï¼šå°±åƒå­—å…¸ä¸­çš„â€œå•è¯â€æˆ–ç”µè¯ç°¿ä¸­çš„â€œå§“åâ€
> - **å€¼ï¼ˆValueï¼‰**ï¼šå°±åƒå­—å…¸ä¸­çš„â€œè§£é‡Šâ€æˆ–ç”µè¯ç°¿ä¸­çš„â€œç”µè¯å·ç â€

### 2. Map çš„ç‰¹ç‚¹

- é”®ä¸å…è®¸é‡å¤ï¼ˆå¦‚æœé‡å¤putï¼Œä¼šè¦†ç›–æ—§å€¼ï¼‰
- æ¯ä¸ªé”®æœ€å¤šåªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼
- valueå¯ä»¥é‡å¤
- keyå¯ä»¥ä¸ºnullä½†åªèƒ½æœ‰ä¸€ä¸ªï¼Œvalueä¹Ÿå¯ä»¥ä¸ºnullä¸”ä¸é™åˆ¶
- å¸¸è§å®ç°ç±»ï¼š`HashMap`, `TreeMap`, `LinkedHashMap`

![image-20251005105525964](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005105525964.png)

![image-20251005105809843](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005105809843.png)

æœ¬è´¨ä¸Šå°±æ˜¯æŠŠTableè¡¨çš„æ¯ä¸ªNodeçš„kvé”®å€¼å¯¹æ‰“åŒ…ç»™ä¸€ä¸ªæ–°çš„Entryå¯¹è±¡ï¼Œå†æŠŠè¿™ä¸ªå¯¹è±¡æ”¾åˆ°é›†åˆEntrySeté‡Œé¢ï¼Œä¸€æ¥æ–¹ä¾¿éå†ï¼ŒäºŒæ¥æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ï¼Œç¬¬ä¸‰ä¸ªå¯ä»¥é˜²æ­¢Nodeçš„å…¶ä»–å€¼è¢«ç¯¡æ”¹ï¼

å› ä¸ºç¨‹åºå‘˜åªéœ€è¦å…³æ³¨é”®å€¼å¯¹ï¼Œå¯¹Nodeçš„å…¶ä»–å±æ€§ä¸å…³å¿ƒï¼Œæ‰€ä»¥æŠŠkvå°è£…æˆEntryä¸¢åˆ°é›†åˆé‡Œé¢è®©ç¨‹åºå‘˜è‡ªå·±ç©ï¼ŒNodeæˆ‘å°±ä¸ç»™ä½ äº†ã€‚

![image-20251005134825227](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005134825227.png)

```java
å®é™…å­˜å‚¨ï¼šNode (åº•å±‚å®ç°)
          â†“ å®ç°
å¯¹å¤–æ¥å£ï¼šEntry (æŠ½è±¡æ¦‚å¿µ)
          â†“ å°è£…
æ–¹ä¾¿ä½¿ç”¨ï¼šEntrySet (å·¥å…·é›†åˆ)
```

### 3.Mapå¸¸ç”¨æ–¹æ³•

```java
import java.util.*;

public class HashMapExample {
    public static void main(String[] args) {
        // 1. åˆ›å»ºHashMap
        Map<String, Integer> map = new HashMap<>();

        // 2. æ·»åŠ å…ƒç´ 
        map.put("Alice", 25);
        map.put("Bob", 30);
        map.put("Charlie", 28);
        map.put("Alice", 26); // ä¼šè¦†ç›–ä¹‹å‰çš„25

        // 3. è·å–å…ƒç´ 
        System.out.println("Aliceçš„å¹´é¾„: " + map.get("Alice")); // 26

        // 4. éå†æ‰€æœ‰é”®
        for (String name : map.keySet()) {
            System.out.println(name);
        }

        // 5. éå†æ‰€æœ‰å€¼
        for (Integer age : map.values()) {
            System.out.println(age);
        }

        // 6. éå†é”®å€¼å¯¹ï¼ˆæ¨èæ–¹å¼ï¼‰
        for (Map.Entry<String, Integer> entry : map.entrySet()) {
            System.out.println(entry.getKey() + ":" + entry.getValue());
        }
    }
}
```

### 4.Mapéå†æ–¹æ³•

| ç±»åˆ«                         | æ–¹æ³•                                                     | æ ¸å¿ƒæ€æƒ³                             | ç‰¹ç‚¹               |
| :--------------------------- | :------------------------------------------------------- | :----------------------------------- | :----------------- |
| **1. éå†é”®å€¼å¯¹ (EntrySet)** | 1. `entrySet()`+ å¢å¼º for å¾ªç¯ 2. `entrySet()`+ Iterator | ç›´æ¥æ‹¿åˆ°**é”®å’Œå€¼çš„ç»„åˆå¯¹è±¡**         | **æœ€å¸¸ç”¨ã€æ•ˆç‡é«˜** |
| **2. å…ˆéå†é”® (KeySet)**     | 3. `keySet()`+ å¢å¼º for å¾ªç¯ 4. `keySet()`+ Iterator     | å…ˆæ‹¿åˆ°æ‰€æœ‰**é”®**ï¼Œå†é€šè¿‡é”®å»**å–**å€¼ | æ•ˆç‡ç¨ä½ï¼Œå†™æ³•ç›´è§‚ |

```java
Map<String, Integer> map = new HashMap<>();
map.put("Alice", 25);
map.put("Bob", 30);
map.put("Charlie", 28);
```

#### æ–¹æ³• 1 & 2ï¼šé€šè¿‡ `entrySet()`éå†ï¼ˆæ¨èğŸ‘ï¼‰

##### ä¸ºä»€ä¹ˆéœ€è¦ `map.entrySet()`ï¼Ÿ

- `Map`æ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œä½†æ‚¨ä¸èƒ½ç›´æ¥éå†å®ƒå†…éƒ¨çš„é”®å€¼å¯¹ã€‚
- `entrySet()`æ–¹æ³•çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰"é”®å€¼å¯¹åŒ…è£¹"çš„é›†åˆï¼ˆ`Set`ï¼‰ã€‚æ¯ä¸ª"åŒ…è£¹"éƒ½æ˜¯ä¸€ä¸ª `Map.Entry`å¯¹è±¡ï¼Œé‡Œé¢è£…ç€ä¸€ä¸ªé”®å’Œå¯¹åº”çš„å€¼ã€‚
- è¿™æ ·æ‚¨å°±å¯ä»¥é€šè¿‡éå†è¿™ä¸ªé›†åˆæ¥è®¿é—®æ¯ä¸ªé”®å€¼å¯¹äº†ã€‚

è¿™æ˜¯**æœ€å¸¸ç”¨ä¸”æ•ˆç‡æœ€é«˜**çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒæ˜¯ç›´æ¥éå†é”®å€¼å¯¹ï¼Œä¸éœ€è¦å†æ¬¡æŸ¥è¯¢ã€‚

##### æ–¹æ³• 1: `entrySet()`+ å¢å¼º for å¾ªç¯

```java
System.out.println("=== æ–¹æ³•1: entrySet() + å¢å¼ºforå¾ªç¯ ===");
Set entrySet=map.entrySet();//EntrySet<Map.Entry<k,v>>
for (Object entry: entrySet) {
    //å°†entryè½¬æˆMap.entry
    Map.Entry m=(Map.Entry) entry;
    System.out.println("Key: " + m.getKey() + ", Value: " + m.getValue());
}
```

**è¾“å‡ºç»“æœï¼š**

```java
Key: Alice, Value: 25
Key: Bob, Value: 30
Key: Charlie, Value: 28
```

**é€šä¿—è§£é‡Šï¼š**

> `map.entrySet()`ä¼šè¿”å›ä¸€ä¸ªè£…ç€æ‰€æœ‰â€œé”®å€¼å¯¹åŒ…è£¹â€çš„é›†åˆã€‚ä½ ç”¨ `for`å¾ªç¯æ‹†å¼€æ¯ä¸€ä¸ªåŒ…è£¹ï¼Œç„¶åç›´æ¥ä»åŒ…è£¹é‡Œæ‹¿å‡ºé”®(`getKey()`)å’Œå€¼(`getValue()`)ã€‚

------

##### æ–¹æ³• 2: `entrySet()`+ Iteratorï¼ˆè¿­ä»£å™¨ï¼‰

```java
System.out.println("\n=== æ–¹æ³•2: entrySet() + Iterator ===");
Iterator iter=entrySet().iterator();
while (iter.hasNext()) {
    Object entry=iter.next();//Nodeç±»å‹--ã€‹å®ç°äº†Map.entry()
    Map.Entry m=(Map.Entry) entry;
    System.out.println("Key: " + m.getKey() + ", Value: " + m.getValue());
    // å¯ä»¥åœ¨éå†æ—¶å®‰å…¨åœ°åˆ é™¤å…ƒç´ 
    // if (key.equals("Bob")) {
    //     iterator.remove(); // å®‰å…¨åˆ é™¤å½“å‰å…ƒç´ 
    // }
}
```

**é€šä¿—è§£é‡Šï¼š**

> è®©ä¸€ä¸ªâ€œè¿­ä»£å™¨å°å“¥â€å¸®ä½ ä¸€ä¸ªä¸€ä¸ªåœ°æ£€æŸ¥åŒ…è£¹ã€‚ä»–å‘Šè¯‰ä½ â€œè¿˜æœ‰ä¸‹ä¸€ä¸ªå—ï¼Ÿâ€(`hasNext()`)ï¼Œä½ è¯´â€œæœ‰â€ï¼Œä»–å°±æŠŠä¸‹ä¸€ä¸ªåŒ…è£¹é€’ç»™ä½ (`next()`)ã€‚è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥è®©å°å“¥ç›´æ¥æŠŠæŸä¸ªåŒ…è£¹æ‰”æ‰(`remove()`)ï¼Œè€Œä¸ä¼šå‡ºé”™ã€‚

#### æ–¹æ³• 3: `keySet()`+ å¢å¼º for å¾ªç¯

```java
System.out.println("\n=== æ–¹æ³•3: keySet() + å¢å¼ºforå¾ªç¯ ===");
for (String key : map.keySet()) {
    Integer value = map.get(key); // é€šè¿‡é”®è·å–å€¼
    System.out.println("Key: " + key + ", Value: " + value);
}
```

#### æ–¹æ³• 4: `keySet()`+ Iterator

```java
System.out.println("\n=== æ–¹æ³•4: keySet() + Iterator ===");
Iterator<String> keyIterator = map.keySet().iterator();
while (keyIterator.hasNext()) {
    String key = keyIterator.next();
    Integer value = map.get(key); // é€šè¿‡é”®è·å–å€¼
    System.out.println("Key: " + key + ", Value: " + value);
}
```

**é€šä¿—è§£é‡Šï¼š**

> ä½ å…ˆæ‹¿åˆ°æ‰€æœ‰åŒ…è£¹çš„â€œå–ä»¶ç â€ï¼ˆ`keySet()`ï¼‰ï¼Œç„¶åä½ æ‹¿ç€æ¯ä¸€ä¸ªå–ä»¶ç ï¼Œå†å»ä»“åº“é‡Œæ‰¾å¯¹åº”çš„åŒ…è£¹ï¼ˆ`get(key)`ï¼‰ã€‚æ¯”ç¬¬ä¸€ç§æ–¹æ³•å¤šè·‘äº†ä¸€è¶Ÿè…¿ã€‚

### Mapç»ƒä¹ 

![image-20251005150003302](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005150003302.png)

```java
package com.Map_;

import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

public class exercise {
    public static void main(String[] args) {
        Map map = new HashMap();
        map.put(101, new Employee("å¼ ä¸‰", 20000.0, 101));
        map.put(102, new Employee("æå››", 17000.0, 102));
        map.put(103, new Employee("ç‹äº”", 19000.0, 103));

        //éå†1 entrySet+å¢å¼ºfor
        Set entryset = map.entrySet();
        for(Object entry:entryset){
            Map.Entry m=(Map.Entry) entry;
            Object value = m.getValue();
            Employee em=(Employee) value;
            if(em.getSal()>18000){
                System.out.println(m.getKey()+"=="+m.getValue());}
        }
        //éå†2 keySet()+Iterator
        Iterator iterator = map.keySet().iterator();
        while (iterator.hasNext()){
            Object key = iterator.next();
            Employee value = (Employee) map.get(key);
            if(value.getSal()>18000){
                System.out.println(key+"=="+value);
            }
        }
    }
}
class Employee{
    private String name;
    private double sal;
    private int id;

    public Employee(String name, double sal, int id) {
        this.name = name;
        this.sal = sal;
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public double getSal() {
        return sal;
    }
    public void setSal(double sal) {
        this.sal = sal;
    }
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    @Override
    public String toString() {
        return "Employee{" +
                "name='" + name + '\'' +
                ", sal=" + sal +
                ", id=" + id +
                '}';
    }
}

```

## HashMapé˜¶æ®µå°ç»“

![image-20251005150225433](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251005150225433.png)

## Mapæ¥å£å®ç°ç±»-HashTable

HashTableæ˜¯Javaä¸­ä¸€ä¸ªç»å…¸çš„é”®å€¼å¯¹å­˜å‚¨æ•°æ®ç»“æ„ï¼Œå®ƒé€šè¿‡åŒæ­¥æœºåˆ¶å®ç°äº†çº¿ç¨‹å®‰å…¨ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½å®ƒçš„æ ¸å¿ƒè¦ç‚¹ï¼š

| ç‰¹æ€§          | HashTable çš„å…·ä½“å®ç°                                         |
| :------------ | :----------------------------------------------------------- |
| **çº¿ç¨‹å®‰å…¨**  | æ‰€æœ‰å…¬å…±æ–¹æ³•ï¼ˆå¦‚`put`, `get`ï¼‰éƒ½ä½¿ç”¨ `synchronized`å…³é”®å­—ä¿®é¥°ï¼Œä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ•°æ®å®‰å…¨ã€‚ |
| **Nullé”®/å€¼** | **ä¸å…è®¸**é”®ï¼ˆKeyï¼‰æˆ–å€¼ï¼ˆValueï¼‰ä¸º`null`ï¼Œå¦åˆ™ä¼šæŠ›å‡º`NullPointerException`ã€‚ |
| **åº•å±‚ç»“æ„**  | **æ•°ç»„ + é“¾è¡¨**ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®ç§°ä¸ºä¸€ä¸ª"æ¡¶"ï¼ˆBucketï¼‰ï¼Œå“ˆå¸Œå†²çªæ—¶ï¼Œæ–°å…ƒç´ ä¼šåŠ å…¥è¯¥æ¡¶çš„é“¾è¡¨ä¸­ã€‚ |
| **åˆå§‹å®¹é‡**  | é»˜è®¤åˆå§‹å®¹é‡ä¸º**11**ã€‚æ‰©å®¹æ—¶ï¼Œæ–°å®¹é‡ä¸º**æ—§å®¹é‡ Ã— 2 + 1**ï¼Œä»¥ä½¿å®¹é‡ä¿æŒä¸ºç´ æ•°ï¼ˆè´¨æ•°ï¼‰ï¼Œè¿™æœ‰åŠ©äºå‡å°‘å“ˆå¸Œå†²çªã€‚ |
| **å“ˆå¸Œå‡½æ•°**  | `index = (key.hashCode() & 0x7FFFFFFF) % table.length`ã€‚é€šè¿‡æŒ‰ä½ä¸æ“ä½œç¡®ä¿ç´¢å¼•å€¼ä¸ºéè´Ÿæ•°ã€‚ |
| **æ‰©å®¹æœºåˆ¶**  | å½“å…ƒç´ æ•°é‡**è¶…è¿‡é˜ˆå€¼11*0.75=8ï¼ˆå®¹é‡ Ã— è´Ÿè½½å› å­ï¼Œé»˜è®¤è´Ÿè½½å› å­ä¸º0.75ï¼‰** æ—¶ï¼Œä¼šè§¦å‘`rehash()`æ“ä½œè¿›è¡Œæ‰©å®¹ã€‚ |

## Mapæ¥å£å®ç°ç±»-Properties(HashTableçš„å­ç±»)

![image-20251007155144076](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251007155144076.png)

![image-20251007155636964](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251007155636964.png)

## æ€»ç»“-å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©é›†åˆå®ç°ç±»(==è®°ä½==)

![image-20251007155822903](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251007155822903.png)

## TreeSetç±»(Setå­ç±»)

TreeSet æ˜¯ Java ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„é›†åˆç±»ï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨å¯¹å…ƒç´ è¿›è¡Œæ’åºå¹¶ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½å®ƒçš„æ ¸å¿ƒè¦ç‚¹ï¼š

### è‡ªç„¶é¡ºåºçš„æ’åºè§„åˆ™

#### å­—ç¬¦ä¸²çš„è‡ªç„¶é¡ºåº = å­—å…¸åºï¼ˆå­—æ¯é¡ºåºï¼‰

- æŒ‰å­—ç¬¦çš„Unicodeç¼–ç å€¼é€ä¸ªæ¯”è¾ƒ
- ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå†æ¯”è¾ƒç¬¬äºŒä¸ªå­—ç¬¦
- ç±»ä¼¼äºè‹±æ–‡å­—å…¸çš„æ’åˆ—æ–¹å¼

| ç‰¹æ€§          | è¯´æ˜                                                         |
| :------------ | :----------------------------------------------------------- |
| **æ ¸å¿ƒç‰¹æ€§**  | å…ƒç´ **å”¯ä¸€**ï¼Œä¸”**è‡ªåŠ¨æ’åº**                                 |
| **åº•å±‚å®ç°**  | åŸºäº **çº¢é»‘æ ‘**ï¼ˆä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼‰                    |
| **æ’åºæ–¹å¼**  | 1. **è‡ªç„¶æ’åº**ï¼šå…ƒç´ ç±»å®ç° `Comparable`æ¥å£ 2. **æ¯”è¾ƒå™¨æ’åº**ï¼šåˆ›å»º TreeSet æ—¶ä¼ å…¥ `Comparator`å¯¹è±¡ |
| **æ€§èƒ½ç‰¹ç‚¹**  | æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º **O(log n)**            |
| **çº¿ç¨‹å®‰å…¨**  | **å¦**ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦å¤–éƒ¨åŒæ­¥                             |
| **å…è®¸ null** | é€šå¸¸**ä¸å…è®¸**ï¼Œé™¤éä½¿ç”¨æ”¯æŒ null çš„è‡ªå®šä¹‰æ¯”è¾ƒå™¨             |

```java
import java.util.Comparator;
import java.util.TreeSet;

public class TreeSetDemo {
    public static void main(String[] args) {
        // ä½¿ç”¨ä½ æˆªå›¾ä¸­çš„è‡ªå®šä¹‰æ¯”è¾ƒå™¨åˆ›å»ºTreeSet
        TreeSet<String> treeSet = new TreeSet<>(new Comparator<String>() {
            @Override
            public int compare(String o1, String o2) {
                // æŒ‰å­—å…¸é¡ºåºæ’åºï¼ˆè‡ªç„¶é¡ºåºï¼‰
                return o1.compareTo(o2);
            }
        });
        
        // æ·»åŠ æ•°æ® - å°±æ˜¯ä½ æˆªå›¾ä¸­çš„4ä¸ªå­—ç¬¦ä¸²
        treeSet.add("jack");
        treeSet.add("tom"); 
        treeSet.add("sp");
        treeSet.add("a");
        
        // æŸ¥çœ‹æ’åºç»“æœ
        System.out.println("æ’åºåçš„ç»“æœ: " + treeSet);
        //æ’åºåçš„ç»“æœ: [a, jack, sp, tom]
    }
}
```

## TreeMapç±»(Mapå­ç±»)

TreeMap æ˜¯ Java é›†åˆæ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„ç±»ï¼Œå®ƒèƒ½å¤ŸæŒ‰ç…§é”®ï¼ˆKeyï¼‰çš„é¡ºåºæ¥å­˜å‚¨é”®å€¼å¯¹ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½å®ƒçš„æ ¸å¿ƒè¦ç‚¹ï¼š

### è‡ªç„¶é¡ºåºçš„æ’åºè§„åˆ™

#### å­—ç¬¦ä¸²çš„è‡ªç„¶é¡ºåº = å­—å…¸åºï¼ˆå­—æ¯é¡ºåºï¼‰

- æŒ‰å­—ç¬¦çš„Unicodeç¼–ç å€¼é€ä¸ªæ¯”è¾ƒ
- ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå†æ¯”è¾ƒç¬¬äºŒä¸ªå­—ç¬¦
- ç±»ä¼¼äºè‹±æ–‡å­—å…¸çš„æ’åˆ—æ–¹å¼

| ç‰¹æ€§             | TreeMap çš„å…·ä½“å®ç°                                |
| :--------------- | :------------------------------------------------ |
| **æ ¸å¿ƒæ•°æ®ç»“æ„** | åŸºäº **çº¢é»‘æ ‘**ï¼ˆä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼‰         |
| **æ ¸å¿ƒç‰¹æ€§**     | é”®å€¼å¯¹**æŒ‰é”®çš„é¡ºåºå­˜å‚¨**ï¼ˆè‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåºï¼‰  |
| **å…ƒç´ å”¯ä¸€æ€§**   | **é”®ï¼ˆKeyï¼‰æ˜¯å”¯ä¸€çš„**ï¼Œç›¸åŒçš„é”®ä¼šè¦†ç›–æ—§å€¼         |
| **æ€§èƒ½ç‰¹ç‚¹**     | æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º **O(log n)** |
| **çº¿ç¨‹å®‰å…¨**     | **å¦**ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦å¤–éƒ¨åŒæ­¥                  |
| **å…è®¸ null é”®** | **ä¸å…è®¸**ï¼Œä¼šæŠ›å‡º `NullPointerException`         |

## Collectionså·¥å…·ç±»

```java
import java.util.*;

public class CollectionsDemo {
    public static void main(String[] args) {
        // åˆ›å»ºæµ‹è¯•æ•°æ®
        List<String> fruits = new ArrayList<>(Arrays.asList(
            "apple", "banana", "orange", "grape", "banana"
        ));
        
        System.out.println("åŸå§‹åˆ—è¡¨: " + fruits);//åŸå§‹åˆ—è¡¨: [apple, banana, orange, grape, banana]

        // 1. reverse - åè½¬é¡ºåº
        Collections.reverse(fruits);
        System.out.println("1. reverseåè½¬å: " + fruits);//[banana, grape, orange, banana, apple]
        
        // 2. shuffle - éšæœºæ‰“ä¹±
        Collections.shuffle(fruits);
        System.out.println("2. shuffleéšæœºæ‰“ä¹±: " + fruits);//[orange, banana, grape, apple, banana]
        
        // 3. sort - è‡ªç„¶é¡ºåºå‡åº
        Collections.sort(fruits);
        System.out.println("3. sortè‡ªç„¶æ’åº: " + fruits);//[apple, banana, banana, grape, orange]
        
        // 4. sort with Comparator - è‡ªå®šä¹‰æ’åºï¼ˆæŒ‰å­—ç¬¦ä¸²é•¿åº¦ï¼‰
        Collections.sort(fruits, (s1, s2) -> s1.length() - s2.length());
        System.out.println("4. æŒ‰é•¿åº¦æ’åº: " + fruits);//[apple, banana, banana, grape, orange]
        
        // 5. swap - äº¤æ¢å…ƒç´ ï¼ˆäº¤æ¢ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªï¼‰
        Collections.swap(fruits, 0, fruits.size()-1);
        System.out.println("5. swapäº¤æ¢å: " + fruits);//[orange, grape, banana, banana, apple]
        
        // 6. max - è‡ªç„¶é¡ºåºæœ€å¤§å€¼
        String maxFruit = Collections.max(fruits);
        System.out.println("6. è‡ªç„¶é¡ºåºæœ€å¤§å€¼: " + maxFruit);//orange
        
        // 7. max with Comparator - è‡ªå®šä¹‰æ¯”è¾ƒæœ€å¤§å€¼ï¼ˆæŒ‰é•¿åº¦ï¼‰
        String longestFruit = Collections.max(fruits, (s1, s2) -> s1.length() - s2.length());
        System.out.println("7. æœ€é•¿çš„æ°´æœ: " + longestFruit);//orange
        
        // 8. min - è‡ªç„¶é¡ºåºæœ€å°å€¼
        String minFruit = Collections.min(fruits);
        System.out.println("8. è‡ªç„¶é¡ºåºæœ€å°å€¼: " + minFruit);//apple
        
        // 9. min with Comparator - è‡ªå®šä¹‰æ¯”è¾ƒæœ€å°å€¼
        String shortestFruit = Collections.min(fruits, (s1, s2) -> s1.length() - s2.length());
        System.out.println("9. æœ€çŸ­çš„æ°´æœ: " + shortestFruit);//grape
        
        // 10. frequency - ç»Ÿè®¡å‡ºç°æ¬¡æ•°
        int bananaCount = Collections.frequency(fruits, "banana");
        System.out.println("10. bananaå‡ºç°æ¬¡æ•°: " + bananaCount);//2
        
        // 11. copy - åˆ—è¡¨å¤åˆ¶ï¼ˆé‡è¦ï¼šç›®æ ‡åˆ—è¡¨sizeè¦è¶³å¤Ÿï¼‰
        List<String> destList = new ArrayList<>(Arrays.asList("1", "2", "3", "4", "5"));
        Collections.copy(destList, fruits);
        System.out.println("11. copyå¤åˆ¶å: " + destList);//[orange, grape, banana, banana, apple]
        
        // 12. replaceAll - æ›¿æ¢æ‰€æœ‰åŒ¹é…å€¼
        Collections.replaceAll(fruits, "banana", "BANANA");
        System.out.println("12. replaceAllæ›¿æ¢å: " + fruits);//[orange, grape, BANANA, BANANA, apple]
    }
}
```

# é›†åˆè¯¾åç»ƒä¹ 

## 1

![image-20251007205417318](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251007205417318.png)

```java
package com.ArrayList_;

import java.util.*;

public class Homework01 {
    public static void main(String[] args) {
        News news1 = new News("æ–°å† ç¡®è¯Šç—…ä¾‹è¶…åƒä¸‡ï¼Œæ•°ç™¾ä¸‡å°åº¦æ•™ä¿¡å¾’èµ´æ’æ²³â€åœ£æµ´â€œå¼•æ°‘ä¼—æ‹…å¿§");
        News news2 = new News("ç”·å­çªç„¶æƒ³èµ·2ä¸ªæœˆå‰é’“çš„é±¼è¿˜åœ¨ç½‘å…œé‡Œï¼Œæèµ·ä¸€çœ‹èµ¶ç´§æ”¾ç”Ÿ");
        ArrayList arrayList = new ArrayList();
        arrayList.add(news1);
        arrayList.add(news2);
        Collections.reverse(arrayList);
        for (int i = 0; i <arrayList.size(); i++) {
            Object o = arrayList.get(i);
            News news=(News) o;
            String title=news.getTitle();
            if(news.getTitle().length()>15){
                title = title.substring(0, 15) + "..."; // æˆªå–å‰15ä¸ªå­—ç¬¦
            }
            System.out.println(title);
        }
    }
}
class News{
    private String title;
    private String content;

    public News(String title) {
        this.title = title;
        this.content="";
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    @Override
    public String toString() {
        return "News{" +
                "title='" + title  +
                '}';
    }
}

```

## 2

![image-20251007205443211](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251007205443211.png)

```java
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

// 1. å®šä¹‰Carç±»
class Car {
    private String name;
    private double price;
    
    // æ„é€ æ–¹æ³•
    public Car(String name, double price) {
        this.name = name;
        this.price = price;
    }
    
    // getterå’Œsetteræ–¹æ³•
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        this.name = name;
    }
    
    public double getPrice() {
        return price;
    }
    
    public void setPrice(double price) {
        this.price = price;
    }
    
    // é‡å†™toStringæ–¹æ³•
    @Override
    public String toString() {
        return "Car{name='" + name + "', price=" + price + "}";
    }
    
    // é‡å†™equalsæ–¹æ³•ï¼Œä¾¿äºæ¯”è¾ƒå’Œåˆ é™¤æ“ä½œ
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        Car car = (Car) obj;
        return Double.compare(car.price, price) == 0 && 
               name.equals(car.name);
    }
}

public class Homework02 {
    public static void main(String[] args) {
        // åˆ›å»ºArrayListé›†åˆ
        ArrayList<Car> carList = new ArrayList<>();
        
        System.out.println("=== ArrayListåŸºæœ¬æ“ä½œæ¼”ç¤º ===");
        
        // 1. add: æ·»åŠ å•ä¸ªå…ƒç´ 
        System.out.println("\n1. æ·»åŠ å•ä¸ªå…ƒç´ :");
        carList.add(new Car("å®é©¬", 500000));
        carList.add(new Car("å¥”é©°", 600000));
        carList.add(new Car("å¥¥è¿ª", 450000));
        System.out.println("æ·»åŠ åé›†åˆ: " + carList);
        
        // 2. remove: åˆ é™¤æŒ‡å®šå…ƒç´ 
        System.out.println("\n2. åˆ é™¤å¥”é©°:");
        Car benz = new Car("å¥”é©°", 600000);
        carList.remove(benz);
        System.out.println("åˆ é™¤åé›†åˆ: " + carList);
        
        // 3. contains: æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨
        System.out.println("\n3. æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨:");
        Car bmw = new Car("å®é©¬", 500000);
        System.out.println("é›†åˆä¸­æ˜¯å¦åŒ…å«å®é©¬: " + carList.contains(bmw));
        System.out.println("é›†åˆä¸­æ˜¯å¦åŒ…å«å¥”é©°: " + carList.contains(benz));
        
        // 4. size: è·å–å…ƒç´ ä¸ªæ•°
        System.out.println("\n4. è·å–å…ƒç´ ä¸ªæ•°:");
        System.out.println("å½“å‰é›†åˆå¤§å°: " + carList.size());
        
        // 5. isEmpty: åˆ¤æ–­æ˜¯å¦ä¸ºç©º
        System.out.println("\n5. åˆ¤æ–­æ˜¯å¦ä¸ºç©º:");
        System.out.println("é›†åˆæ˜¯å¦ä¸ºç©º: " + carList.isEmpty());
        
        // 6. clear: æ¸…ç©ºé›†åˆ
        System.out.println("\n6. æ¸…ç©ºé›†åˆ:");
        carList.clear();
        System.out.println("æ¸…ç©ºåé›†åˆå¤§å°: " + carList.size());
        System.out.println("æ¸…ç©ºåæ˜¯å¦ä¸ºç©º: " + carList.isEmpty());
        
        // é‡æ–°æ·»åŠ ä¸€äº›è½¦è¾†ç”¨äºåç»­æ¼”ç¤º
        carList.add(new Car("ä¸°ç”°", 200000));
        carList.add(new Car("æœ¬ç”°", 180000));
        carList.add(new Car("å¤§ä¼—", 150000));
        
        // 7. addAll: æ·»åŠ å¤šä¸ªå…ƒç´ 
        System.out.println("\n7. æ·»åŠ å¤šä¸ªå…ƒç´ :");
        ArrayList<Car> newCars = new ArrayList<>();
        newCars.add(new Car("æ¯”äºšè¿ª", 120000));
        newCars.add(new Car("ç‰¹æ–¯æ‹‰", 300000));
        carList.addAll(newCars);
        System.out.println("æ·»åŠ å¤šä¸ªå…ƒç´ å: " + carList);
        
        // 8. containsAll: æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨
        System.out.println("\n8. æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨:");
        ArrayList<Car> checkCars = new ArrayList<>();
        checkCars.add(new Car("ä¸°ç”°", 200000));
        checkCars.add(new Car("æ¯”äºšè¿ª", 120000));
        System.out.println("æ˜¯å¦åŒæ—¶åŒ…å«ä¸°ç”°å’Œæ¯”äºšè¿ª: " + carList.containsAll(checkCars));
        
        // 9. removeAll: åˆ é™¤å¤šä¸ªå…ƒç´ 
        System.out.println("\n9. åˆ é™¤å¤šä¸ªå…ƒç´ :");
        ArrayList<Car> removeCars = new ArrayList<>();
        removeCars.add(new Car("æœ¬ç”°", 180000));
        removeCars.add(new Car("å¤§ä¼—", 150000));
        carList.removeAll(removeCars);
        System.out.println("åˆ é™¤å¤šä¸ªå…ƒç´ å: " + carList);
        
        System.out.println("\n=== éå†æ–¹å¼æ¼”ç¤º ===");
        
        // é‡æ–°å¡«å……æ•°æ®ç”¨äºéå†æ¼”ç¤º
        carList.clear();
        carList.add(new Car("å®é©¬", 500000));
        carList.add(new Car("å¥”é©°", 600000));
        carList.add(new Car("å¥¥è¿ª", 450000));
        carList.add(new Car("é›·å…‹è¨æ–¯", 550000));
        
        // 10. ä½¿ç”¨å¢å¼ºforå¾ªç¯éå†
        System.out.println("\n10. ä½¿ç”¨å¢å¼ºforå¾ªç¯éå†:");
        for (Car car : carList) {
            System.out.println(car);
        }
        
        // 11. ä½¿ç”¨è¿­ä»£å™¨éå†
        System.out.println("\n11. ä½¿ç”¨è¿­ä»£å™¨éå†:");
        Iterator<Car> iterator = carList.iterator();
        while (iterator.hasNext()) {
            Car car = iterator.next();
            System.out.println(car);
        }
    }
}
```

## 3

![image-20251008135709420](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251008135709420.png)

```java
package com.ArrayList_;

import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

public class Homework03 {
    public static void main(String[] args) {
        Map m = new HashMap();
        m.put("jack",650);
        m.put("tom",1200);
        m.put("smith",2900);
        m.put("jack",2600);
        Set entrySet = m.entrySet();
        Iterator iter = entrySet.iterator();
        while (iter.hasNext()){
            Object entry = iter.next();
            Map.Entry e=(Map.Entry) entry;
            Object value = e.getValue();
            value=(int)value+100;
            e.setValue(value);
            System.out.println(e.getKey());
            System.out.println(e.getValue());
        }
    }
}
```

## 4-5

![image-20251008141713249](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251008141713249.png)

```java
è¿™é“é¢˜è¦æ±‚æ¯”è¾ƒHashSetå’ŒTreeSetå¦‚ä½•å®ç°å»é‡ï¼ˆå³ç¡®ä¿é›†åˆä¸­ä¸åŒ…å«é‡å¤å…ƒç´ ï¼‰ã€‚ä»¥ä¸‹æ˜¯åŸºäºé¢˜ç›®è¦ç‚¹çš„æ‰©å±•è§£é‡Šï¼Œæˆ‘ä¼šä»åŸºç¡€æ¦‚å¿µè®²èµ·ï¼Œé€æ­¥æ·±å…¥ã€‚

ï¼ˆ1ï¼‰HashSetçš„å»é‡æœºåˆ¶ï¼šåŸºäºhashCode()å’Œequals()æ–¹æ³•
â€‹æ ¸å¿ƒç­”æ¡ˆâ€‹ï¼šHashSeté€šè¿‡ç»„åˆä½¿ç”¨å¯¹è±¡çš„hashCode()å’Œequals()æ–¹æ³•æ¥å®ç°å»é‡ã€‚æ·»åŠ å…ƒç´ æ—¶ï¼Œå…ˆè®¡ç®—å“ˆå¸Œå€¼å®šä½å­˜å‚¨ä½ç½®ï¼Œå†ä½¿ç”¨equalsæ–¹æ³•æ¯”è¾ƒæ˜¯å¦é‡å¤ã€‚

â€‹è¯¦ç»†è§£é¢˜æ€è·¯â€‹ï¼š

â€‹åº•å±‚æ•°æ®ç»“æ„â€‹ï¼šHashSetåº•å±‚åŸºäºHashMapå®ç°ï¼ˆHashMapä½¿ç”¨æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘å­˜å‚¨é”®å€¼å¯¹ï¼Œä½†HashSetåªä½¿ç”¨é”®ï¼Œå€¼å›ºå®šä¸ºä¸€ä¸ªè™šæ‹Ÿå¯¹è±¡ï¼‰ã€‚è¿™ä½¿å®ƒå…·æœ‰å¿«é€ŸæŸ¥æ‰¾çš„ç‰¹æ€§ã€‚

â€‹å»é‡æµç¨‹â€‹ï¼ˆåˆ†æ­¥è§£é‡Šï¼‰ï¼š

â€‹è®¡ç®—å“ˆå¸Œå€¼â€‹ï¼šå½“è°ƒç”¨hashSet.add(element)æ—¶ï¼Œé¦–å…ˆè°ƒç”¨å…ƒç´ çš„hashCode()æ–¹æ³•è®¡ç®—å“ˆå¸Œå€¼ã€‚å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç”¨äºç¡®å®šå…ƒç´ åœ¨åº•å±‚æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®ï¼ˆé€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„ï¼‰ã€‚

â€‹å®šä½ç´¢å¼•â€‹ï¼šæ ¹æ®å“ˆå¸Œå€¼æ‰¾åˆ°æ•°ç»„å¯¹åº”çš„ç´¢å¼•ï¼ˆç§°ä¸ºâ€œæ¡¶â€æˆ–â€œbucketâ€ï¼‰ã€‚å¦‚æœè¯¥ä½ç½®ä¸ºç©ºï¼ˆæ²¡æœ‰å…ƒç´ ï¼‰ï¼Œåˆ™ç›´æ¥å­˜å…¥æ–°å…ƒç´ ã€‚

â€‹å¤„ç†å†²çªâ€‹ï¼šå¦‚æœè¯¥ä½ç½®å·²æœ‰å…ƒç´ ï¼ˆå“ˆå¸Œå†²çªï¼‰ï¼Œåˆ™ä½¿ç”¨equals()æ–¹æ³•éå†æ¯”è¾ƒæ–°å…ƒç´ ä¸ç°æœ‰å…ƒç´ ï¼š

å¦‚æœequals()è¿”å›trueï¼Œè¡¨ç¤ºå…ƒç´ é‡å¤ï¼Œä¸æ·»åŠ æ–°å…ƒç´ ã€‚

å¦‚æœequals()è¿”å›falseï¼Œè¡¨ç¤ºä¸é‡å¤ï¼Œåˆ™å°†æ–°å…ƒç´ æ·»åŠ åˆ°é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„æœ«å°¾ï¼ˆJava 8åï¼Œé“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼ä¼šè½¬ä¸ºçº¢é»‘æ ‘ä»¥æé«˜æ€§èƒ½ï¼‰ã€‚

â€‹å…³é”®æ–¹æ³•çš„ä½œç”¨â€‹ï¼š

hashCode()ï¼šç”¨äºå¿«é€Ÿå®šä½ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸åŒå¯¹è±¡åº”æœ‰ä¸åŒå“ˆå¸Œå€¼ï¼Œä½†å®é™…å¯èƒ½å†²çªã€‚

equals()ï¼šç”¨äºç²¾ç¡®æ¯”è¾ƒå†…å®¹æ˜¯å¦ç›¸åŒã€‚å¿…é¡»ä¿è¯ï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡equalsä¸ºtrueï¼Œåˆ™hashCodeå¿…é¡»ç›¸åŒï¼›ä½†hashCodeç›¸åŒï¼Œequalsä¸ä¸€å®šä¸ºtrueã€‚

â€‹ç¤ºä¾‹å¸®åŠ©ç†è§£â€‹ï¼š

java
// å‡è®¾æœ‰ä¸€ä¸ªPersonç±»ï¼Œé‡å†™hashCodeå’Œequals
class Person {
    String name;
    // é‡å†™hashCodeå’Œequalsï¼ŒåŸºäºnameå­—æ®µ
    @Override
    public int hashCode() { return name != null ? name.hashCode() : 0; }
    @Override
    public boolean equals(Object obj) { /* æ¯”è¾ƒname */ }
}

HashSet<Person> set = new HashSet<>();
set.add(new Person("Alice")); // æ·»åŠ æˆåŠŸï¼Œè®¡ç®—hashCodeå®šä½ç´¢å¼•
set.add(new Person("Alice")); // æ·»åŠ å¤±è´¥ï¼Œå› ä¸ºhashCodeç›¸åŒä¸”equalsè¿”å›true
â€‹ä¸¾ä¸€åä¸‰â€‹ï¼šå¦‚æœæœªé‡å†™hashCode()å’Œequals()ï¼ŒHashSetä¼šä½¿ç”¨Objectç±»çš„é»˜è®¤å®ç°ï¼ˆåŸºäºå†…å­˜åœ°å€ï¼‰ï¼Œå¯èƒ½å¯¼è‡´é‡å¤å…ƒç´ è¢«è¯¯åŠ ã€‚å› æ­¤ï¼Œè‡ªå®šä¹‰ç±»ç”¨ä½œHashSetå…ƒç´ æ—¶ï¼Œå¿…é¡»é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚

ï¼ˆ2ï¼‰TreeSetçš„å»é‡æœºåˆ¶ï¼šåŸºäºComparatoræˆ–Comparableæ¥å£
â€‹æ ¸å¿ƒç­”æ¡ˆâ€‹ï¼šTreeSeté€šè¿‡æ¯”è¾ƒæœºåˆ¶å®ç°å»é‡ã€‚å¦‚æœæä¾›äº†Comparatorå¯¹è±¡ï¼Œä½¿ç”¨å…¶compareæ–¹æ³•ï¼›å¦åˆ™ï¼Œä¾èµ–å…ƒç´ çš„Comparableæ¥å£çš„compareToæ–¹æ³•ã€‚å¦‚æœæ¯”è¾ƒè¿”å›0ï¼Œè§†ä¸ºé‡å¤å…ƒç´ ï¼Œä¸æ·»åŠ ã€‚

â€‹è¯¦ç»†è§£é¢˜æ€è·¯â€‹ï¼š

â€‹åº•å±‚æ•°æ®ç»“æ„â€‹ï¼šTreeSetåº•å±‚åŸºäºTreeMapå®ç°ï¼ˆçº¢é»‘æ ‘ç»“æ„ï¼‰ï¼Œå…ƒç´ ä¼šè‡ªåŠ¨æ’åºï¼Œå› æ­¤å»é‡åŸºäºæ’åºæ¯”è¾ƒã€‚

â€‹å»é‡æµç¨‹â€‹ï¼š

â€‹åˆ¤æ–­æ¯”è¾ƒå™¨â€‹ï¼šæ·»åŠ å…ƒç´ æ—¶ï¼ˆå¦‚treeSet.add(element)ï¼‰ï¼ŒTreeSetæ£€æŸ¥æ˜¯å¦åœ¨æ„é€ æ—¶ä¼ å…¥äº†Comparatorå¯¹è±¡ã€‚

å¦‚æœä¼ å…¥äº†Comparatorï¼šä½¿ç”¨comparator.compare(newElement, existingElement)æ¯”è¾ƒæ–°å…ƒç´ ä¸ç°æœ‰å…ƒç´ ã€‚

å¦‚æœæœªä¼ å…¥Comparatorï¼šè¦æ±‚å…ƒç´ å¿…é¡»å®ç°Comparableæ¥å£ï¼Œä½¿ç”¨element.compareTo(existingElement)æ¯”è¾ƒã€‚

â€‹æ¯”è¾ƒç»“æœå¤„ç†â€‹ï¼š

å¦‚æœcompareæ–¹æ³•è¿”å›0ï¼Œè¡¨ç¤ºå…ƒç´ â€œç›¸ç­‰â€ï¼ˆå»é‡ä¾æ®ï¼‰ï¼Œä¸æ·»åŠ æ–°å…ƒç´ ã€‚

å¦‚æœè¿”å›è´Ÿæ•°æˆ–æ­£æ•°ï¼Œæ ¹æ®çº¢é»‘æ ‘æ’åºè§„åˆ™æ’å…¥æ–°ä½ç½®ã€‚

â€‹å…³é”®ç‚¹â€‹ï¼š

TreeSetçš„â€œå»é‡â€åŸºäºæ¯”è¾ƒç»“æœæ˜¯å¦ä¸º0ï¼Œè€Œéequalsæ–¹æ³•ï¼ˆä½†é»˜è®¤æƒ…å†µä¸‹ï¼ŒcompareToåº”å’Œequalsé€»è¾‘ä¸€è‡´ï¼‰ã€‚

å¦‚æœæœªæä¾›Comparatorä¸”å…ƒç´ æœªå®ç°Comparableï¼Œæ·»åŠ æ—¶ä¼šæŠ›å‡ºClassCastExceptionï¼ˆè§ç¬¬5é¢˜ï¼‰ã€‚

â€‹ç¤ºä¾‹å¸®åŠ©ç†è§£â€‹ï¼š

java
// æ–¹å¼1ï¼šä½¿ç”¨Comparator
TreeSet<String> set1 = new TreeSet<>( (a,b) -> a.compareTo(b) ); // è‡ªå®šä¹‰æ¯”è¾ƒå™¨
set1.add("apple");
set1.add("apple"); // æ·»åŠ å¤±è´¥ï¼Œcompareè¿”å›0

// æ–¹å¼2ï¼šä¾èµ–Comparableï¼ˆStringå·²å®ç°ï¼‰
TreeSet<String> set2 = new TreeSet<>();
set2.add("banana");
set2.add("banana"); // æ·»åŠ å¤±è´¥ï¼ŒcompareToè¿”å›0
â€‹ä¸¾ä¸€åä¸‰â€‹ï¼šTreeSetä¸ä»…å»é‡ï¼Œè¿˜æ’åºã€‚å¦‚æœå»é‡é€»è¾‘éœ€è¦è‡ªå®šä¹‰ï¼ˆå¦‚å¿½ç•¥å¤§å°å†™ï¼‰ï¼Œå¯é€šè¿‡Comparatorå®ç°ã€‚æ³¨æ„ï¼šå¦‚æœcompareè¿”å›0ä½†equalsä¸ºfalseï¼Œå¯èƒ½å¯¼è‡´é›†åˆè¡Œä¸ºä¸ä¸€è‡´ï¼Œå› æ­¤å»ºè®®ä¿æŒæ¯”è¾ƒé€»è¾‘ä¸equalsåŒæ­¥ã€‚

æ€»ç»“ç¬¬4é¢˜
HashSetå»é‡å¿«ï¼Œä½†ä¸ä¿è¯é¡ºåºï¼›TreeSetå»é‡åŒæ—¶æ’åºï¼Œä½†æ€§èƒ½ç¨ä½ã€‚é€‰æ‹©å–å†³äºéœ€æ±‚ï¼šå¦‚æœéœ€è¦å¿«é€Ÿè®¿é—®ä¸”ä¸å…³å¿ƒé¡ºåºï¼Œç”¨HashSetï¼›å¦‚æœéœ€è¦æœ‰åºéå†ï¼Œç”¨TreeSetã€‚
```

```java
ç¬¬5é¢˜ï¼šä»£ç åˆ†æé¢˜ï¼ˆTreeSetæ·»åŠ Personå¯¹è±¡æ˜¯å¦ä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰
è¿™é“é¢˜è¦æ±‚åˆ¤æ–­ä»£ç TreeSet treeSet = new TreeSet(); treeSet.add(new Person());æ˜¯å¦ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä»æºç å±‚é¢è§£é‡ŠåŸå› ã€‚

æ ¸å¿ƒç­”æ¡ˆ
â€‹æ˜¯å¦ä¼šæŠ›å‡ºå¼‚å¸¸â€‹ï¼šä¼šæŠ›å‡ºClassCastExceptionï¼ˆç±»å‹è½¬æ¢å¼‚å¸¸ï¼‰ã€‚

â€‹å¼‚å¸¸å‘ç”Ÿæ—¶æœºâ€‹ï¼šåœ¨è°ƒç”¨treeSet.add(new Person())æ—¶æŠ›å‡ºã€‚

è¯¦ç»†è§£é¢˜æ€è·¯
æˆ‘å°†ä»æºç è§’åº¦é€æ­¥è§£é‡ŠåŸå› ï¼ŒåŒ…æ‹¬TreeSetçš„addæ–¹æ³•å¦‚ä½•å·¥ä½œï¼Œä»¥åŠä¸ºä»€ä¹ˆPersonç±»ä¼šå¯¼è‡´å¼‚å¸¸ã€‚å‡è®¾Personæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œæœªå®ç°ä»»ä½•æ¥å£ã€‚

â€‹ä»£ç åˆ†æâ€‹ï¼š

TreeSet treeSet = new TreeSet();ï¼šåˆ›å»ºäº†ä¸€ä¸ªç©ºçš„TreeSetå®ä¾‹ã€‚ç”±äºæœªä¼ å…¥Comparatorï¼ŒTreeSetä¼šä¾èµ–å…ƒç´ çš„è‡ªç„¶æ’åºï¼ˆå³è¦æ±‚å…ƒç´ å®ç°Comparableæ¥å£ï¼‰ã€‚

treeSet.add(new Person());ï¼šå°è¯•æ·»åŠ ä¸€ä¸ªPersonå¯¹è±¡ã€‚Personç±»å¦‚æœæ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œå°±ä¼šå‡ºé—®é¢˜ã€‚

â€‹æºç å±‚é¢è§£é‡Šâ€‹ï¼ˆåŸºäºJavaæ ‡å‡†åº“æºç ï¼Œç®€åŒ–è¯´æ˜ï¼‰ï¼š

TreeSetåº•å±‚ä½¿ç”¨TreeMapæ¥å­˜å‚¨å…ƒç´ ã€‚addæ–¹æ³•å®é™…ä¸Šè°ƒç”¨TreeMapçš„putæ–¹æ³•ã€‚

å…³é”®æºç é€»è¾‘ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š

java
// TreeSetçš„addæ–¹æ³•å†…éƒ¨
public boolean add(E e) {
    return map.put(e, PRESENT) == null; // PRESENTæ˜¯è™šæ‹Ÿå€¼
}

// TreeMapçš„putæ–¹æ³•å†…éƒ¨
public V put(K key, V value) {
    // é¦–å…ˆæ£€æŸ¥æ¯”è¾ƒå™¨ï¼šå¦‚æœæœªè®¾ç½®comparatorï¼Œåˆ™å°è¯•å°†keyå¼ºåˆ¶è½¬æ¢ä¸ºComparable
    Comparable<? super K> k = (Comparable<? super K>) key; // è¿™é‡Œå¯èƒ½æŠ›å‡ºClassCastException
    // ç„¶åä½¿ç”¨k.compareTo(...)è¿›è¡Œæ¯”è¾ƒå’Œæ’å…¥
}
â€‹å¼‚å¸¸è§¦å‘ç‚¹â€‹ï¼šå½“TreeMapçš„putæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå¦‚æœæœªæä¾›Comparatorï¼Œå®ƒä¼šå°è¯•å°†æ·»åŠ çš„å¯¹è±¡ï¼ˆè¿™é‡Œæ˜¯Personå®ä¾‹ï¼‰å¼ºåˆ¶è½¬æ¢ä¸ºComparableæ¥å£ç±»å‹ã€‚ç”±äºPersonç±»æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œè¿™ä¸ªå¼ºåˆ¶è½¬æ¢å¤±è´¥ï¼ŒæŠ›å‡ºClassCastExceptionã€‚

â€‹æ ¹æœ¬åŸå› â€‹ï¼šTreeSetéœ€è¦æ¯”è¾ƒå…ƒç´ æ¥ç»´æŠ¤æ’åºå’Œå»é‡ã€‚å¦‚æœæ²¡æœ‰æ¯”è¾ƒæœºåˆ¶ï¼ˆæ— Comparatoræˆ–å…ƒç´ ä¸å¯æ¯”è¾ƒï¼‰ï¼Œå°±æ— æ³•å·¥ä½œã€‚

â€‹ç¤ºä¾‹å’Œå˜ä½“å¸®åŠ©ç†è§£â€‹ï¼š

â€‹é”™è¯¯ä»£ç ç¤ºä¾‹â€‹ï¼š

java

class Person { } // æœªå®ç°Comparable
TreeSet treeSet = new TreeSet();
treeSet.add(new Person()); // æŠ›å‡ºClassCastException
â€‹ä¿®å¤æ–¹æ³•â€‹ï¼š

æ–¹æ³•1ï¼šè®©Personå®ç°Comparableæ¥å£ã€‚

java
class Person implements Comparable<Person> {
    @Override
    public int compareTo(Person other) { /* å®ç°æ¯”è¾ƒé€»è¾‘ï¼Œä¾‹å¦‚åŸºäºid */ }
}
æ–¹æ³•2ï¼šåˆ›å»ºTreeSetæ—¶ä¼ å…¥Comparatorã€‚

java

TreeSet<Person> treeSet = new TreeSet<>( (p1, p2) -> p1.name.compareTo(p2.name) );
treeSet.add(new Person()); // æ­£å¸¸æ·»åŠ 
â€‹ä¸¾ä¸€åä¸‰â€‹ï¼šè¿™ç§å¼‚å¸¸æ˜¯â€œæ¥å£ç¼–ç¨‹â€å’Œâ€œåŠ¨æ€ç»‘å®šâ€çš„ä½“ç°ã€‚TreeSetåœ¨è¿è¡Œæ—¶åŠ¨æ€å†³å®šæ¯”è¾ƒæ–¹å¼ï¼Œå¦‚æœå…ƒç´ ä¸æ»¡è¶³å¥‘çº¦ï¼ˆæœªå®ç°Comparableï¼‰ï¼Œå°±ä¼šå¤±è´¥ã€‚è¿™å¼ºè°ƒäº†Javaä¸­â€œçº¦å®šä¼˜äºé…ç½®â€çš„åŸåˆ™ã€‚

â€‹å°ç™½å‹å¥½æç¤ºâ€‹ï¼šå¯ä»¥æŠŠTreeSetæƒ³è±¡æˆä¸€ä¸ªéœ€è¦â€œæ’åºè§„åˆ™â€çš„æ™ºèƒ½ä¹¦æ¶ã€‚å¦‚æœä½ ä¸æ”¾ä¹¦ï¼ˆå…ƒç´ ï¼‰æ—¶å‘Šè¯‰å®ƒå¦‚ä½•æ’åºï¼ˆé€šè¿‡Comparatoræˆ–Comparableï¼‰ï¼Œå®ƒå°±ä¼šâ€œå›°æƒ‘â€å¹¶æŠ¥é”™ã€‚Personç±»å°±åƒä¸€æœ¬æ²¡æœ‰æ ‡ç­¾çš„ä¹¦ï¼Œä¹¦æ¶ä¸çŸ¥é“å¦‚ä½•æ‘†æ”¾å®ƒã€‚

æ€»ç»“ç¬¬5é¢˜
ä»£ç ä¼šæŠ›å‡ºClassCastExceptionï¼Œå› ä¸ºPersonæœªå®ç°Comparableæ¥å£ï¼Œä¸”æœªæä¾›Comparatorã€‚ä»æºç çœ‹ï¼ŒTreeSetåœ¨æ·»åŠ å…ƒç´ æ—¶å¼ºåˆ¶è½¬æ¢å¤±è´¥ã€‚

é¢„é˜²æªæ–½ï¼šå§‹ç»ˆä¸ºTreeSetæä¾›æ¯”è¾ƒæœºåˆ¶ï¼Œè¦ä¹ˆå…ƒç´ å®ç°Comparableï¼Œè¦ä¹ˆæ„é€ æ—¶ä¼ å…¥Comparatorã€‚

å¦‚æœæ‚¨å¯¹è¿™éƒ¨åˆ†å†…å®¹è¿˜æœ‰ç–‘é—®ï¼Œæˆ–æƒ³æŸ¥çœ‹æ›´å¤šä»£ç ç¤ºä¾‹ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼æˆ‘å¯ä»¥è¿›ä¸€æ­¥ç»†åŒ–è§£é‡Šã€‚
```

## 6  ==JAVAé›†åˆçš„é™·é˜±==

![image-20251008145455606](JAVAç¬¬14ç« éšè®°_é›†åˆ.assets/image-20251008145455606.png)

```java
æ­¥éª¤1: åˆ›å»ºHashSetå’Œæ·»åŠ åˆå§‹å¯¹è±¡ï¼ˆç¬¬1-4è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : HashSet set = new HashSet();ç­‰ã€‚

â€‹åŠŸèƒ½: åˆ›å»ºä¸€ä¸ªç©ºçš„HashSeté›†åˆï¼Œç„¶åæ·»åŠ p1å’Œp2ã€‚

â€‹é€»è¾‘è§£é‡Š:

HashSetåŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œå®ƒä½¿ç”¨hashCodeå€¼å¿«é€Ÿå®šä½å…ƒç´ å­˜å‚¨çš„â€œæ¡¶â€ï¼ˆç±»ä¼¼ä¹¦æ¶ä¸Šçš„æ ¼å­ï¼‰ã€‚æ·»åŠ å…ƒç´ æ—¶ï¼š

å…ˆè°ƒç”¨å¯¹è±¡çš„hashCode()æ–¹æ³•è®¡ç®—å“ˆå¸Œå€¼ï¼ˆä¾‹å¦‚ï¼Œp1çš„hashCodeåŸºäºid=1001å’Œname="AA"ï¼‰ã€‚

æ ¹æ®å“ˆå¸Œå€¼æ‰¾åˆ°å¯¹åº”çš„æ¡¶ç´¢å¼•ã€‚

å¦‚æœæ¡¶ä¸ºç©ºï¼Œç›´æ¥å­˜å…¥ï¼›å¦‚æœæ¡¶éç©ºï¼Œç”¨equalsæ–¹æ³•æ¯”è¾ƒæ˜¯å¦é‡å¤ï¼ˆé‡å¤åˆ™ä¸æ·»åŠ ï¼‰ã€‚

è¿™é‡Œï¼Œp1å’Œp2çš„idå’Œnameä¸åŒï¼Œæ‰€ä»¥hashCodeä¸åŒï¼Œå®ƒä»¬è¢«å­˜å…¥ä¸åŒçš„æ¡¶ï¼Œæ·»åŠ æˆåŠŸã€‚setåˆå§‹åŒ…å«ä¸¤ä¸ªå…ƒç´ ã€‚

â€‹è¯­æ³•ç»†èŠ‚: HashSetæ˜¯æ³›å‹é›†åˆï¼Œä½†è¿™é‡Œä½¿ç”¨äº†åŸå§‹ç±»å‹ï¼ˆæœªæŒ‡å®šæ³›å‹ï¼‰ï¼Œä½†ä¸å½±å“è¡Œä¸ºã€‚addæ–¹æ³•è¿”å›booleanï¼ˆæˆåŠŸè¿”å›trueï¼‰ã€‚

â€‹å°ç™½æç¤º: æƒ³è±¡setæ˜¯ä¸€ä¸ªä¹¦æ¶ï¼Œæ¯æœ¬ä¹¦ï¼ˆPersonå¯¹è±¡ï¼‰æœ‰ä¸€ä¸ªå”¯ä¸€ç¼–å·ï¼ˆhashCodeï¼‰ã€‚æ·»åŠ æ—¶ï¼Œæ ¹æ®ç¼–å·æ”¾ä¹¦åˆ°å¯¹åº”æ ¼å­ã€‚p1å’Œp2ç¼–å·ä¸åŒï¼Œæ‰€ä»¥æ”¾åœ¨ä¸åŒæ ¼å­ã€‚

â€‹æ­¥éª¤2: ä¿®æ”¹p1çš„nameå­—æ®µï¼ˆç¬¬5è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : p1.name = "CC";

â€‹åŠŸèƒ½: å°†p1å¯¹è±¡çš„nameä»"AA"æ”¹ä¸º"CC"ã€‚

â€‹é€»è¾‘è§£é‡Š:

p1æ˜¯å¯¹è±¡å¼•ç”¨ï¼Œsetä¸­å­˜å‚¨çš„æ˜¯p1çš„å¼•ç”¨ï¼ˆå³å†…å­˜åœ°å€ï¼‰ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„å‰¯æœ¬ã€‚æ‰€ä»¥ä¿®æ”¹p1çš„nameåï¼Œsetä¸­çš„p1å¯¹è±¡ä¹ŸåŒæ­¥å˜åŒ–ï¼ˆç°åœ¨name="CC"ï¼‰ã€‚

ä½†å…³é”®ç‚¹ï¼šå¯¹è±¡åœ¨setä¸­çš„å­˜å‚¨ä½ç½®ï¼ˆæ¡¶ç´¢å¼•ï¼‰æ˜¯åŸºäºæ·»åŠ æ—¶çš„hashCodeè®¡ç®—çš„ã€‚ä¿®æ”¹p1çš„nameåï¼Œp1çš„hashCodeå˜äº†ï¼ˆä»åŸºäº"AA"å˜ä¸ºåŸºäº"CC"ï¼‰ï¼Œä½†å®ƒåœ¨setä¸­çš„ä½ç½®æ²¡æœ‰å˜â€”â€”å®ƒä»ç„¶åœ¨åŸå§‹æ¡¶ä¸­ï¼ˆåŸºäºæ—§hashCode"AA"çš„æ¡¶ï¼‰ã€‚

â€‹é™·é˜±: è¿™ç ´åäº†HashSetçš„ä¸å˜æ€§ï¼šå¦‚æœå¯¹è±¡åœ¨é›†åˆä¸­è¢«ä¿®æ”¹ï¼Œå¯¼è‡´hashCodeå˜åŒ–ï¼Œåç»­æ“ä½œï¼ˆå¦‚removeï¼‰å¯èƒ½æ— æ³•æ­£ç¡®å®šä½å¯¹è±¡ã€‚

â€‹ç¤ºä¾‹: å°±åƒæŠŠä¸€æœ¬ä¹¦ä»ä¹¦æ¶æ ¼å­é‡Œæ‹¿å‡ºæ¥æ”¹äº†æ ‡é¢˜ï¼Œä½†ä¹¦æ¶è®°å½•çš„ä½ç½®è¿˜æ˜¯æ—§æ ‡é¢˜çš„ç¼–å·ï¼Œå¯¼è‡´ä»¥åæŸ¥æ‰¾æ—¶å¯èƒ½æ‰¾é”™æ ¼å­ã€‚

â€‹æ­¥éª¤3: å°è¯•ç§»é™¤p1ï¼ˆç¬¬6è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : set.remove(p1);

â€‹åŠŸèƒ½: å°è¯•ä»setä¸­ç§»é™¤p1å¯¹è±¡ã€‚

â€‹é€»è¾‘è§£é‡Š:

removeæ–¹æ³•çš„å·¥ä½œæµç¨‹ï¼š

è®¡ç®—p1çš„å½“å‰hashCodeï¼ˆåŸºäºid=1001,name="CC"ï¼‰ã€‚

æ ¹æ®æ–°hashCodeæ‰¾åˆ°å¯¹åº”çš„æ¡¶ï¼ˆæ¯”å¦‚æ¡¶Bï¼‰ã€‚

åœ¨æ¡¶Bä¸­ä½¿ç”¨equalsæ–¹æ³•æ¯”è¾ƒæ˜¯å¦æœ‰åŒ¹é…å¯¹è±¡ã€‚

é—®é¢˜ï¼šp1å®é™…å­˜å‚¨åœ¨æ—§æ¡¶ä¸­ï¼ˆåŸºäºæ·»åŠ æ—¶hashCode"AA"çš„æ¡¶ï¼Œæ¯”å¦‚æ¡¶Aï¼‰ã€‚ä½†æ–°hashCode"CC"å¯èƒ½å¯¹åº”ä¸åŒçš„æ¡¶Bã€‚å› æ­¤ï¼Œremoveåœ¨æ¡¶Bä¸­æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°p1ï¼ˆå› ä¸ºp1åœ¨æ¡¶Aï¼‰ï¼Œæ‰€ä»¥ç§»é™¤å¤±è´¥ï¼Œè¿”å›falseã€‚

ç»“æœï¼šp1ä»ç„¶åœ¨setä¸­ï¼Œä½†å®ƒçš„nameå·²æ˜¯"CC"ã€‚

â€‹è¯­æ³•ç»†èŠ‚: removeæ–¹æ³•è¿”å›booleanè¡¨ç¤ºæ˜¯å¦æˆåŠŸã€‚è¿™é‡Œå®ƒè¿”å›falseï¼Œä½†ä»£ç æ²¡æ£€æŸ¥ã€‚

â€‹å°ç™½æç¤º: è¿™å°±åƒæ ¹æ®æ–°ä¹¦åç¼–å·æ‰¾ä¹¦ï¼Œä½†ä¹¦è¿˜åœ¨è€ä½ç½®ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°ã€‚HashSetè®¾è®¡å‡è®¾å¯¹è±¡hashCodeä¸å˜ï¼Œä¿®æ”¹åå°±ä¼šå‡ºé”™ã€‚

â€‹æ­¥éª¤4: ç¬¬ä¸€ä¸ªè¾“å‡ºï¼ˆç¬¬7è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : System.out.println(set);

â€‹è¾“å‡º: setåŒ…å«p1å’Œp2ã€‚p1çš„nameæ˜¯"CC"ï¼Œp2çš„nameæ˜¯"BB"ã€‚æ‰€ä»¥è¾“å‡ºç±»ä¼¼[Person{id=1001, name='CC'}, Person{id=1002, name='BB'}]ã€‚

â€‹åŸå› : removeå¤±è´¥ï¼Œsetæœªå˜åŒ–ã€‚

â€‹æ­¥éª¤5: æ·»åŠ æ–°Person(1001,"CC")ï¼ˆç¬¬8è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : set.add(new Person(1001,"CC"));

â€‹åŠŸèƒ½: æ·»åŠ ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå…¶idå’Œnameä¸ä¿®æ”¹åçš„p1ç›¸åŒã€‚

â€‹é€»è¾‘è§£é‡Š:

addæ–¹æ³•æµç¨‹ï¼š

è®¡ç®—æ–°å¯¹è±¡çš„hashCodeï¼ˆåŸºäºid=1001,name="CC"ï¼‰ï¼Œæ‰¾åˆ°å¯¹åº”æ¡¶ï¼ˆæ¯”å¦‚æ¡¶Bï¼‰ã€‚

åœ¨æ¡¶Bä¸­æ£€æŸ¥æ˜¯å¦é‡å¤ï¼šæ¡¶Bå¯èƒ½ä¸ºç©ºï¼ˆå› ä¸ºp1åœ¨æ¡¶Aï¼‰ï¼Œæ‰€ä»¥æ²¡æœ‰é‡å¤å¯¹è±¡ã€‚

å› æ­¤æ·»åŠ æˆåŠŸã€‚

ä½†é—®é¢˜ï¼šæ–°å¯¹è±¡å’Œp1åœ¨é€»è¾‘ä¸Šç›¸ç­‰ï¼ˆidå’Œnameç›¸åŒï¼‰ï¼Œä½†ç”±äºp1åœ¨æ¡¶Aï¼ˆåŸºäºæ—§hashCodeï¼‰ï¼Œè€Œæ–°å¯¹è±¡åœ¨æ¡¶Bï¼ˆåŸºäºæ–°hashCodeï¼‰ï¼ŒHashSetè®¤ä¸ºå®ƒä»¬ä¸é‡å¤ã€‚è¿™å¯¼è‡´setä¸­å‡ºç°é‡å¤å…ƒç´ ï¼Œè¿èƒŒäº†Setçš„å»é‡åŸåˆ™ã€‚

â€‹è¾“å‡º: æ·»åŠ åï¼Œsetæœ‰ä¸‰ä¸ªå…ƒç´ ï¼šp1(1001,"CC")ã€p2(1002,"BB")ã€æ–°å¯¹è±¡(1001,"CC")ã€‚

â€‹æ­¥éª¤6: ç¬¬äºŒä¸ªè¾“å‡ºï¼ˆç¬¬9è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : System.out.println(set);

â€‹è¾“å‡º: setåŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªâ€œç›¸ç­‰â€çš„å¯¹è±¡ã€‚è¾“å‡ºç±»ä¼¼[Person{id=1001, name='CC'}, Person{id=1002, name='BB'}, Person{id=1001, name='CC'}]ã€‚

â€‹æ­¥éª¤7: æ·»åŠ æ–°Person(1001,"AA")ï¼ˆç¬¬10è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : set.add(new Person(1001,"AA"));

â€‹åŠŸèƒ½: æ·»åŠ å¦ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå…¶idå’Œnameä¸åŸå§‹p1ï¼ˆæ·»åŠ æ—¶ï¼‰ç›¸åŒã€‚

â€‹é€»è¾‘è§£é‡Š:

addæ–¹æ³•ï¼š

è®¡ç®—æ–°å¯¹è±¡çš„hashCodeï¼ˆåŸºäºid=1001,name="AA"ï¼‰ï¼Œæ‰¾åˆ°å¯¹åº”æ¡¶ï¼ˆæ¡¶Aï¼Œå³p1çš„åŸå§‹æ¡¶ï¼‰ã€‚

åœ¨æ¡¶Aä¸­ï¼Œæœ‰p1å¯¹è±¡ï¼ˆä½†p1çš„nameç°åœ¨æ˜¯"CC"ï¼‰ã€‚ä½¿ç”¨equalsæ¯”è¾ƒï¼šæ–°å¯¹è±¡name="AA"ï¼Œp1 name="CC"ï¼Œæ‰€ä»¥ä¸ç›¸ç­‰ã€‚

å› æ­¤æ·»åŠ æˆåŠŸã€‚

ç»“æœï¼šsetæœ‰å››ä¸ªå…ƒç´ ï¼ŒåŒ…æ‹¬p1ã€p2ã€ç¬¬ä¸€ä¸ªæ–°å¯¹è±¡ã€å’Œè¿™ä¸ªæ–°å¯¹è±¡ã€‚

â€‹è¾“å‡º: æ·»åŠ åï¼Œsetæœ‰å››ä¸ªå…ƒç´ ã€‚

â€‹æ­¥éª¤8: ç¬¬ä¸‰ä¸ªè¾“å‡ºï¼ˆç¬¬11è¡Œï¼‰â€‹â€‹

â€‹ä»£ç : System.out.println(set);

â€‹è¾“å‡º: setåŒ…å«å››ä¸ªå…ƒç´ ï¼šp1(1001,"CC")ã€p2(1002,"BB")ã€ç¬¬ä¸€ä¸ªæ–°å¯¹è±¡(1001,"CC")ã€ç¬¬äºŒä¸ªæ–°å¯¹è±¡(1001,"AA")ã€‚è¾“å‡ºç±»ä¼¼[Person{id=1001, name='CC'}, Person{id=1002, name='BB'}, Person{id=1001, name='CC'}, Person{id=1001, name='AA'}]ã€‚

ä¸ºä»€ä¹ˆè¾“å‡ºä¼šè¿™æ ·ï¼Ÿå…³é”®é™·é˜±åˆ†æ
â€‹æ ¸å¿ƒé—®é¢˜: å½“å¯¹è±¡è¢«æ·»åŠ åˆ°HashSetåï¼Œå¦‚æœä¿®æ”¹äº†å½±å“hashCodeçš„å­—æ®µï¼ˆå¦‚nameï¼‰ï¼Œä¼šå¯¼è‡´å¯¹è±¡å­˜å‚¨ä½ç½®ï¼ˆæ¡¶ï¼‰ä¸å½“å‰hashCodeä¸ä¸€è‡´ã€‚åç»­æ“ä½œï¼ˆå¦‚removeæˆ–addï¼‰å¯èƒ½æ— æ³•æ­£ç¡®å·¥ä½œï¼Œå› ä¸ºHashSetä¾èµ–hashCodeå®šä½æ¡¶ã€‚

â€‹hashCodeå’Œequalsçš„ä½œç”¨:

hashCode: ç”¨äºå¿«é€Ÿå®šä½æ¡¶ï¼Œç†æƒ³æƒ…å†µä¸‹ä¸åŒå¯¹è±¡åº”æœ‰ä¸åŒhashCodeï¼Œä½†å¯èƒ½å†²çªã€‚

equals: ç”¨äºç²¾ç¡®æ¯”è¾ƒå¯¹è±¡å†…å®¹ã€‚HashSetè¦æ±‚å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsä¸ºtrueï¼Œåˆ™hashCodeå¿…é¡»ç›¸åŒã€‚

è¿™é‡Œï¼Œä¿®æ”¹p1åï¼ŒhashCodeå˜äº†ï¼Œä½†å¯¹è±¡åœ¨æ—§æ¡¶ä¸­ï¼Œé€ æˆâ€œé”™ä½â€ã€‚

â€‹é™·é˜±æ€»ç»“: æ°¸è¿œä¸è¦ä¿®æ”¹å·²å­˜å‚¨åœ¨HashSetï¼ˆæˆ–HashMapé”®ï¼‰ä¸­çš„å¯¹è±¡çš„hashCodeç›¸å…³å­—æ®µï¼Œå¦åˆ™é›†åˆçŠ¶æ€ä¼šä¸ä¸€è‡´ã€‚è¿™æ˜¯Javaé›†åˆçš„å¸¸è§é™·é˜±ã€‚
```

```java
//ä¸¾ä¸€åä¸‰ï¼šå­¦ä¹ å»ºè®®å’Œå˜ä½“ç¤ºä¾‹
//ä¸ºäº†å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£ï¼Œè¿™é‡Œæœ‰ä¸€äº›æ‰©å±•å†…å®¹ï¼š

//â€‹æ­£ç¡®åšæ³•: å¦‚æœéœ€è¦ä¿®æ”¹Setä¸­çš„å¯¹è±¡ï¼Œåº”å…ˆremoveå¯¹è±¡ï¼Œä¿®æ”¹åå†addå›å»ï¼Œç¡®ä¿hashCodeä¸€è‡´ã€‚
set.remove(p1); // å…ˆç§»é™¤
p1.name = "CC"; // ä¿®æ”¹
set.add(p1); // å†æ·»åŠ 
```

